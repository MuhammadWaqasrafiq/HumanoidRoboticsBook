<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-perception-stack/perception-stack" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Chapter 07 - Perception Stack | Embodied AI: The Future of Robotics</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://muhammadwaqasrafiq.github.io/HumanoidRoboticsBook/img/social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://muhammadwaqasrafiq.github.io/HumanoidRoboticsBook/img/social-card.jpg"><meta data-rh="true" property="og:url" content="https://muhammadwaqasrafiq.github.io/HumanoidRoboticsBook/docs/perception-stack"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Chapter 07 - Perception Stack | Embodied AI: The Future of Robotics"><meta data-rh="true" name="description" content="Master camera sensors, depth perception, VSLAM, and object detection for humanoid robot perception systems"><meta data-rh="true" property="og:description" content="Master camera sensors, depth perception, VSLAM, and object detection for humanoid robot perception systems"><meta data-rh="true" name="keywords" content="perception,rgb-d-cameras,depth-sensing,vslam,object-detection,yolov8,sam2,sensor-fusion"><link data-rh="true" rel="icon" href="/HumanoidRoboticsBook/img/new_logo.svg"><link data-rh="true" rel="canonical" href="https://muhammadwaqasrafiq.github.io/HumanoidRoboticsBook/docs/perception-stack"><link data-rh="true" rel="alternate" href="https://muhammadwaqasrafiq.github.io/HumanoidRoboticsBook/docs/perception-stack" hreflang="en"><link data-rh="true" rel="alternate" href="https://muhammadwaqasrafiq.github.io/HumanoidRoboticsBook/docs/perception-stack" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"07. Perception Stack","item":"https://muhammadwaqasrafiq.github.io/HumanoidRoboticsBook/docs/perception-stack/"}]}</script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"><link rel="stylesheet" href="/HumanoidRoboticsBook/assets/css/styles.a6d7e190.css">
<script src="/HumanoidRoboticsBook/assets/js/runtime~main.803ab506.js" defer="defer"></script>
<script src="/HumanoidRoboticsBook/assets/js/main.a5cf34ea.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/HumanoidRoboticsBook/"><div class="navbar__logo"><img src="/HumanoidRoboticsBook/img/new_logo.svg" alt="Embodied AI Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/HumanoidRoboticsBook/img/new_logo.svg" alt="Embodied AI Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Embodied AI</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/HumanoidRoboticsBook/docs/intro">Book</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/MuhammadWaqasrafiq/HumanoidRoboticsBook" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/HumanoidRoboticsBook/docs/intro"><span title="Introduction" class="linkLabel_WmDU">Introduction</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/HumanoidRoboticsBook/docs/why-physical-ai"><span title="Part I: Foundation" class="categoryLinkLabel_W154">Part I: Foundation</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/HumanoidRoboticsBook/docs/why-physical-ai"><span title="01. Why Physical AI Is the Next Frontier" class="linkLabel_WmDU">01. Why Physical AI Is the Next Frontier</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/HumanoidRoboticsBook/docs/hardware-2026"><span title="02. The Hardware You Actually Need in 2026" class="linkLabel_WmDU">02. The Hardware You Actually Need in 2026</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/HumanoidRoboticsBook/docs/ros2-fundamentals"><span title="Part II: ROS 2 &amp; Simulation" class="categoryLinkLabel_W154">Part II: ROS 2 &amp; Simulation</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/HumanoidRoboticsBook/docs/ros2-fundamentals"><span title="03. ROS 2 – The Robotic Nervous System" class="categoryLinkLabel_W154">03. ROS 2 – The Robotic Nervous System</span></a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/HumanoidRoboticsBook/docs/urdf-digital-twins"><span title="04. URDF &amp; Digital Twins" class="linkLabel_WmDU">04. URDF &amp; Digital Twins</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/HumanoidRoboticsBook/docs/simulation-ecosystem"><span title="05. Gazebo vs Isaac Sim" class="linkLabel_WmDU">05. Gazebo vs Isaac Sim</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/HumanoidRoboticsBook/docs/isaac-platform"><span title="06. NVIDIA Isaac Platform" class="linkLabel_WmDU">06. NVIDIA Isaac Platform</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/HumanoidRoboticsBook/docs/perception-stack"><span title="Part III: Core Robotics" class="categoryLinkLabel_W154">Part III: Core Robotics</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/HumanoidRoboticsBook/docs/perception-stack"><span title="07. Perception Stack" class="linkLabel_WmDU">07. Perception Stack</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/HumanoidRoboticsBook/docs/bipedal-locomotion"><span title="08. Bipedal Locomotion" class="linkLabel_WmDU">08. Bipedal Locomotion</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/HumanoidRoboticsBook/docs/dexterous-manipulation"><span title="09. Dexterous Manipulation" class="linkLabel_WmDU">09. Dexterous Manipulation</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/HumanoidRoboticsBook/docs/vla-models"><span title="Part IV: Intelligence Layer" class="categoryLinkLabel_W154">Part IV: Intelligence Layer</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/HumanoidRoboticsBook/docs/vla-models"><span title="10. Vision-Language-Action Models" class="linkLabel_WmDU">10. Vision-Language-Action Models</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/HumanoidRoboticsBook/docs/voice-to-action"><span title="11. Voice-to-Action Pipeline" class="linkLabel_WmDU">11. Voice-to-Action Pipeline</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/HumanoidRoboticsBook/docs/sim-to-real"><span title="12. Sim-to-Real Transfer" class="linkLabel_WmDU">12. Sim-to-Real Transfer</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/HumanoidRoboticsBook/docs/capstone-butler"><span title="Part V: Integration" class="categoryLinkLabel_W154">Part V: Integration</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/HumanoidRoboticsBook/docs/capstone-butler"><span title="13. Capstone: Autonomous Butler" class="linkLabel_WmDU">13. Capstone: Autonomous Butler</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/HumanoidRoboticsBook/docs/appendices/lab-build-guides"><span title="Appendices" class="categoryLinkLabel_W154">Appendices</span></a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/HumanoidRoboticsBook/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Part III: Core Robotics</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">07. Perception Stack</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Chapter 07: Perception Stack for Humanoid Robots</h1></header>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Chapter Overview</div><div class="admonitionContent_BuS1"><p>Build the complete perception system enabling robots to &quot;see&quot; and understand their environment. Learn camera configuration, depth sensing, Visual SLAM (VSLAM), object detection/segmentation, and integrate state-of-the-art 2025-2026 perception models achieving &gt;85% detection accuracy in complex scenes.</p></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="what-youll-learn">What You&#x27;ll Learn<a href="#what-youll-learn" class="hash-link" aria-label="Direct link to What You&#x27;ll Learn" title="Direct link to What You&#x27;ll Learn" translate="no">​</a></h2>
<p>By the end of this chapter, you&#x27;ll be able to:</p>
<ul>
<li class="">✅ Set up RGB-D cameras (Intel RealSense D455, ZED 2i) on ROS 2</li>
<li class="">✅ Process depth data and generate point clouds for 3D perception</li>
<li class="">✅ Implement Visual SLAM (ORB-SLAM3, VINS-Fusion) for localization</li>
<li class="">✅ Deploy YOLOv8, SAM 2, and Grounding DINO for object detection</li>
<li class="">✅ Fuse multi-sensor data (camera + LiDAR + IMU) for robust perception</li>
<li class="">✅ Achieve &lt;100ms perception latency for real-time control</li>
<li class="">✅ Optimize perception pipelines for production deployment</li>
<li class="">✅ Debug common perception failures (lighting, occlusion, calibration)</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="prerequisites">Prerequisites<a href="#prerequisites" class="hash-link" aria-label="Direct link to Prerequisites" title="Direct link to Prerequisites" translate="no">​</a></h2>
<p>Before starting this chapter, you should:</p>
<ul>
<li class="">✅ Complete <strong><a class="" href="/HumanoidRoboticsBook/ros2-fundamentals">Chapter 03: ROS 2 Fundamentals</a></strong> (topics, services, tf2)</li>
<li class="">✅ Complete <strong><a class="" href="/HumanoidRoboticsBook/simulation-ecosystem">Chapter 05: Simulation Ecosystem</a></strong> (Isaac Sim sensors)</li>
<li class="">✅ Have Python 3.10+, ROS 2 Iron, PyTorch 2.1+ installed</li>
<li class="">✅ Have RTX GPU with 8+ GB VRAM (12 GB recommended for YOLOv8 + SAM 2)</li>
<li class="">✅ Understand basic computer vision concepts (image processing, camera models)</li>
</ul>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Hardware Requirements</div><div class="admonitionContent_BuS1"><p><strong>Minimum:</strong> RTX 4060 Ti (16 GB) for perception inference
<strong>Recommended:</strong> RTX 4070 Ti (12 GB) for multi-model pipelines
<strong>Professional:</strong> RTX 4080/4090 (16-24 GB) for real-time perception + VLA integration</p></div></div>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="why-perception-matters">Why Perception Matters<a href="#why-perception-matters" class="hash-link" aria-label="Direct link to Why Perception Matters" title="Direct link to Why Perception Matters" translate="no">​</a></h2>
<p>Humanoid robots operate in <strong>unstructured, dynamic environments</strong> - homes, offices, warehouses - where:</p>
<ul>
<li class="">Objects move and change position</li>
<li class="">Lighting conditions vary (shadows, reflections, darkness)</li>
<li class="">Obstacles appear unexpectedly (pets, humans, furniture)</li>
<li class="">No pre-mapped environments available</li>
</ul>
<p><strong>Perception systems enable robots to:</strong></p>
<ol>
<li class=""><strong>Localize</strong> themselves in 3D space (SLAM)</li>
<li class=""><strong>Detect</strong> objects, people, obstacles (object detection)</li>
<li class=""><strong>Segment</strong> scenes for manipulation planning (instance segmentation)</li>
<li class=""><strong>Track</strong> moving objects over time (multi-object tracking)</li>
<li class=""><strong>Reconstruct</strong> 3D geometry for navigation (point clouds, meshes)</li>
</ol>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="perception-pipeline-architecture">Perception Pipeline Architecture<a href="#perception-pipeline-architecture" class="hash-link" aria-label="Direct link to Perception Pipeline Architecture" title="Direct link to Perception Pipeline Architecture" translate="no">​</a></h2>
<p>A production perception stack has 5 core components:</p>
<!-- -->
<p><strong>Key Design Principles:</strong></p>
<ul>
<li class=""><strong>Modularity</strong>: Each component can be swapped independently</li>
<li class=""><strong>Redundancy</strong>: Multiple sensors provide robustness</li>
<li class=""><strong>Real-time</strong>: &lt;100ms latency from sensor to output</li>
<li class=""><strong>Scalability</strong>: Add more sensors/models without rewriting pipeline</li>
</ul>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="rgb-d-camera-setup">RGB-D Camera Setup<a href="#rgb-d-camera-setup" class="hash-link" aria-label="Direct link to RGB-D Camera Setup" title="Direct link to RGB-D Camera Setup" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="supported-cameras-2026-market">Supported Cameras (2026 Market)<a href="#supported-cameras-2026-market" class="hash-link" aria-label="Direct link to Supported Cameras (2026 Market)" title="Direct link to Supported Cameras (2026 Market)" translate="no">​</a></h3>
<table><thead><tr><th>Camera</th><th>Resolution</th><th>FPS</th><th>Depth Range</th><th>ROS 2 Support</th><th>Price</th></tr></thead><tbody><tr><td><strong>Intel RealSense D455</strong></td><td>1280x720</td><td>90</td><td>0.6-6m</td><td>Native</td><td>$329</td></tr><tr><td><strong>Stereolabs ZED 2i</strong></td><td>4416x1242</td><td>120</td><td>0.2-20m</td><td>Native</td><td>$449</td></tr><tr><td><strong>Orbbec Astra Pro</strong></td><td>640x480</td><td>30</td><td>0.6-8m</td><td>Community</td><td>$149</td></tr><tr><td><strong>Microsoft Azure Kinect DK</strong></td><td>3840x2160</td><td>30</td><td>0.5-5.46m</td><td>Community</td><td>$399 (discontinued)</td></tr></tbody></table>
<p><strong>Recommendation for humanoids:</strong> Intel RealSense D455 (best price/performance, excellent ROS 2 support)</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="realsense-d455-ros-2-installation">RealSense D455 ROS 2 Installation<a href="#realsense-d455-ros-2-installation" class="hash-link" aria-label="Direct link to RealSense D455 ROS 2 Installation" title="Direct link to RealSense D455 ROS 2 Installation" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Install RealSense SDK 2.0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> apt-key adv </span><span class="token parameter variable" style="color:#36acaa">--keyserver</span><span class="token plain"> keyserver.ubuntu.com --recv-key F6E65AC044F831AC80A06380C8B3A55A6F3EFCDE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> add-apt-repository </span><span class="token string" style="color:#e3116c">&quot;deb https://librealsense.intel.com/Debian/apt-repo </span><span class="token string variable" style="color:#36acaa">$(</span><span class="token string variable" style="color:#36acaa">lsb_release </span><span class="token string variable parameter variable" style="color:#36acaa">-cs</span><span class="token string variable" style="color:#36acaa">)</span><span class="token string" style="color:#e3116c"> main&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">apt</span><span class="token plain"> update</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">apt</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> librealsense2-dkms librealsense2-utils librealsense2-dev</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Test camera</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">realsense-viewer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Install ROS 2 wrapper</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">apt</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> ros-iron-realsense2-camera ros-iron-realsense2-description</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Launch camera node</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ros2 launch realsense2_camera rs_launch.py </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    enable_color:</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">true </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    enable_depth:</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">true </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    depth_module.profile:</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">1280x720x30 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    rgb_camera.profile:</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">1280x720x30</span><br></span></code></pre></div></div>
<p><strong>Verify camera topics:</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ros2 topic list </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> camera</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Expected output:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># /camera/color/image_raw</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># /camera/depth/image_rect_raw</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># /camera/aligned_depth_to_color/image_raw</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># /camera/color/camera_info</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="camera-calibration">Camera Calibration<a href="#camera-calibration" class="hash-link" aria-label="Direct link to Camera Calibration" title="Direct link to Camera Calibration" translate="no">​</a></h3>
<p><strong>Why calibration matters:</strong></p>
<ul>
<li class="">Corrects lens distortion (barrel, pincushion)</li>
<li class="">Aligns RGB and depth images</li>
<li class="">Improves depth accuracy by 10-20%</li>
</ul>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Install calibration tools</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">apt</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> ros-iron-camera-calibration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Calibrate RGB camera (print 8x6 checkerboard, 25mm squares)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ros2 run camera_calibration cameracalibrator </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">--size</span><span class="token plain"> 8x6 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">--square</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.025</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    image:</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">/camera/color/image_raw </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    camera:</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">/camera/color</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Calibrate depth-to-RGB alignment</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ros2 run camera_calibration cameracalibrator </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">--size</span><span class="token plain"> 8x6 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">--square</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.025</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    image:</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">/camera/aligned_depth_to_color/image_raw </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    camera:</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">/camera/aligned_depth_to_color</span><br></span></code></pre></div></div>
<p><strong>Save calibration file:</strong></p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># ~/.ros/camera_info/camera.yaml</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">image_width</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1280</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">image_height</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">720</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">camera_matrix</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">rows</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">cols</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">615.3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">640.2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">615.7</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">360.1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">distortion_coefficients</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">rows</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">cols</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">-0.041</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.052</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">-0.0003</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.0002</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.0</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="depth-processing-and-point-clouds">Depth Processing and Point Clouds<a href="#depth-processing-and-point-clouds" class="hash-link" aria-label="Direct link to Depth Processing and Point Clouds" title="Direct link to Depth Processing and Point Clouds" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="depth-image-to-point-cloud-conversion">Depth Image to Point Cloud Conversion<a href="#depth-image-to-point-cloud-conversion" class="hash-link" aria-label="Direct link to Depth Image to Point Cloud Conversion" title="Direct link to Depth Image to Point Cloud Conversion" translate="no">​</a></h3>
<p><strong>Theory:</strong> Each depth pixel D(u,v) projects to 3D point P(X,Y,Z):</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">X = (u - cx) * Z / fx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Y = (v - cy) * Z / fy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Z = D(u,v)</span><br></span></code></pre></div></div>
<p>Where <code>(cx, cy)</code> is principal point and <code>(fx, fy)</code> is focal length from calibration.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="point-cloud-generation">Point Cloud Generation<a href="#point-cloud-generation" class="hash-link" aria-label="Direct link to Point Cloud Generation" title="Direct link to Point Cloud Generation" translate="no">​</a></h3>
<p>See <code>code-examples/perception/depth_processor.py</code> for complete implementation:</p>
<p><strong>Key steps:</strong></p>
<ol>
<li class="">Align depth to RGB camera frame</li>
<li class="">Convert depth image to XYZ coordinates</li>
<li class="">Filter invalid points (Z=0, Z&gt;max_range)</li>
<li class="">Downsample with voxel grid (reduce 1M points → 50K)</li>
<li class="">Remove outliers (statistical filtering)</li>
<li class="">Publish as <code>sensor_msgs/PointCloud2</code></li>
</ol>
<p><strong>Expected performance:</strong></p>
<ul>
<li class=""><strong>Input:</strong> 1280x720 depth image (921,600 pixels)</li>
<li class=""><strong>Output:</strong> 50,000-100,000 3D points</li>
<li class=""><strong>Latency:</strong> 20-30ms on RTX 4070 Ti</li>
<li class=""><strong>Frequency:</strong> 30 Hz</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="visualizing-point-clouds-in-rviz2">Visualizing Point Clouds in RViz2<a href="#visualizing-point-clouds-in-rviz2" class="hash-link" aria-label="Direct link to Visualizing Point Clouds in RViz2" title="Direct link to Visualizing Point Clouds in RViz2" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Launch RViz2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rviz2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Add PointCloud2 display</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Topic: /camera/pointcloud</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Fixed Frame: camera_link</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Color Transformer: RGB8</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Optional: Save point cloud to PCD file</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ros2 run pcl_ros pointcloud_to_pcd input:</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">/camera/pointcloud</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="visual-slam-vslam">Visual SLAM (VSLAM)<a href="#visual-slam-vslam" class="hash-link" aria-label="Direct link to Visual SLAM (VSLAM)" title="Direct link to Visual SLAM (VSLAM)" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="what-is-vslam">What is VSLAM?<a href="#what-is-vslam" class="hash-link" aria-label="Direct link to What is VSLAM?" title="Direct link to What is VSLAM?" translate="no">​</a></h3>
<p><strong>Simultaneous Localization and Mapping (SLAM)</strong> solves two problems simultaneously:</p>
<ol>
<li class=""><strong>Localization:</strong> Where is the robot? (6-DoF pose: x, y, z, roll, pitch, yaw)</li>
<li class=""><strong>Mapping:</strong> What does the environment look like? (3D point cloud map)</li>
</ol>
<p><strong>Visual SLAM</strong> uses cameras as the primary sensor (vs. LiDAR SLAM).</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="vslam-pipeline">VSLAM Pipeline<a href="#vslam-pipeline" class="hash-link" aria-label="Direct link to VSLAM Pipeline" title="Direct link to VSLAM Pipeline" translate="no">​</a></h3>
<!-- -->
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="orb-slam3-setup-recommended">ORB-SLAM3 Setup (Recommended)<a href="#orb-slam3-setup-recommended" class="hash-link" aria-label="Direct link to ORB-SLAM3 Setup (Recommended)" title="Direct link to ORB-SLAM3 Setup (Recommended)" translate="no">​</a></h3>
<p><strong>Why ORB-SLAM3?</strong></p>
<ul>
<li class="">State-of-the-art accuracy (ATE &lt;0.1m on TUM dataset)</li>
<li class="">Supports monocular, stereo, RGB-D, multi-camera</li>
<li class="">Active loop closure detection</li>
<li class="">Real-time performance (30+ FPS on laptop CPU)</li>
</ul>
<p><strong>Installation:</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Dependencies</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">apt</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> libeigen3-dev libopencv-dev libpangolin-dev</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Clone ORB-SLAM3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">cd</span><span class="token plain"> ~/ros2_ws/src</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> clone https://github.com/UZ-SLAMLab/ORB_SLAM3.git</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">cd</span><span class="token plain"> ORB_SLAM3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Build (takes 10-15 minutes)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">chmod</span><span class="token plain"> +x build.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./build.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Build ROS 2 wrapper</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">cd</span><span class="token plain"> ~/ros2_ws/src</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> clone https://github.com/zang09/ORB-SLAM3-ROS2.git</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">cd</span><span class="token plain"> ~/ros2_ws</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">colcon build --packages-select orbslam3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Source workspace</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">source</span><span class="token plain"> install/setup.bash</span><br></span></code></pre></div></div>
<p><strong>Run ORB-SLAM3 with RealSense:</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Terminal 1: Launch camera</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ros2 launch realsense2_camera rs_launch.py enable_depth:</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Terminal 2: Run ORB-SLAM3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ros2 run orbslam3 rgbd </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ~/ros2_ws/src/ORB_SLAM3/Vocabulary/ORBvoc.txt </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ~/ros2_ws/src/ORB_SLAM3/Examples/RGB-D/RealSense_D455.yaml </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /camera/color/image_raw:</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">/camera/color/image_raw </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /camera/depth/image_raw:</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">/camera/aligned_depth_to_color/image_raw</span><br></span></code></pre></div></div>
<p><strong>Check SLAM output:</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Robot pose published to /tf</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ros2 run tf2_ros tf2_echo map camera_link</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 3D map points published as PointCloud2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ros2 topic </span><span class="token builtin class-name">echo</span><span class="token plain"> /orbslam3/map_points --no-arr</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="vslam-alternatives">VSLAM Alternatives<a href="#vslam-alternatives" class="hash-link" aria-label="Direct link to VSLAM Alternatives" title="Direct link to VSLAM Alternatives" translate="no">​</a></h3>
<table><thead><tr><th>VSLAM System</th><th>Accuracy</th><th>Speed</th><th>ROS 2 Support</th><th>Best Use Case</th></tr></thead><tbody><tr><td><strong>ORB-SLAM3</strong></td><td>Excellent</td><td>30 FPS</td><td>Community</td><td>Indoor navigation, static scenes</td></tr><tr><td><strong>VINS-Fusion</strong></td><td>Excellent</td><td>20 FPS</td><td>Native</td><td>High-speed motion, IMU fusion</td></tr><tr><td><strong>SVO2</strong></td><td>Good</td><td>100+ FPS</td><td>Community</td><td>Drones, fast-moving robots</td></tr><tr><td><strong>RTAB-Map</strong></td><td>Good</td><td>10 FPS</td><td>Native</td><td>Large-scale mapping, 3D reconstruction</td></tr></tbody></table>
<p><strong>For humanoids:</strong> ORB-SLAM3 (best accuracy) or VINS-Fusion (if using IMU)</p>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="object-detection-and-segmentation">Object Detection and Segmentation<a href="#object-detection-and-segmentation" class="hash-link" aria-label="Direct link to Object Detection and Segmentation" title="Direct link to Object Detection and Segmentation" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="yolov8-real-time-object-detection">YOLOv8: Real-Time Object Detection<a href="#yolov8-real-time-object-detection" class="hash-link" aria-label="Direct link to YOLOv8: Real-Time Object Detection" title="Direct link to YOLOv8: Real-Time Object Detection" translate="no">​</a></h3>
<p><strong>YOLOv8 (2023) improvements over YOLOv5:</strong></p>
<ul>
<li class="">+3.7 mAP on COCO dataset (53.9% vs 50.2%)</li>
<li class="">2x faster training convergence</li>
<li class="">Anchor-free design (simpler, more robust)</li>
<li class="">Improved small object detection</li>
</ul>
<p><strong>Model Sizes:</strong></p>
<table><thead><tr><th>Model</th><th>Parameters</th><th>COCO mAP</th><th>Speed (RTX 4070 Ti)</th><th>VRAM</th></tr></thead><tbody><tr><td>YOLOv8n</td><td>3.2M</td><td>37.3%</td><td>150 FPS</td><td>1.5 GB</td></tr><tr><td>YOLOv8s</td><td>11.2M</td><td>44.9%</td><td>120 FPS</td><td>2.5 GB</td></tr><tr><td>YOLOv8m</td><td>25.9M</td><td>50.2%</td><td>80 FPS</td><td>4.5 GB</td></tr><tr><td><strong>YOLOv8l</strong></td><td>43.7M</td><td><strong>52.9%</strong></td><td><strong>60 FPS</strong></td><td><strong>6.5 GB</strong></td></tr><tr><td>YOLOv8x</td><td>68.2M</td><td>53.9%</td><td>40 FPS</td><td>9.5 GB</td></tr></tbody></table>
<p><strong>Recommendation:</strong> YOLOv8l (best accuracy/speed trade-off for humanoids)</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="yolov8-ros-2-integration">YOLOv8 ROS 2 Integration<a href="#yolov8-ros-2-integration" class="hash-link" aria-label="Direct link to YOLOv8 ROS 2 Integration" title="Direct link to YOLOv8 ROS 2 Integration" translate="no">​</a></h3>
<p>See <code>code-examples/perception/yolo_detector.py</code> for complete implementation.</p>
<p><strong>Installation:</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pip </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> ultralytics</span><span class="token operator" style="color:#393A34">&gt;=</span><span class="token number" style="color:#36acaa">8.0</span><span class="token plain">.0</span><br></span></code></pre></div></div>
<p><strong>Test YOLOv8 inference:</strong></p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> ultralytics </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> YOLO</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Load model (downloads on first run)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">model </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> YOLO</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;yolov8l.pt&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Run inference</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">results </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> model</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;/camera/color/image_raw&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> stream</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Process detections</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> result </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> results</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    boxes </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> result</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">boxes</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">xyxy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cpu</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">numpy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># [N, 4] bounding boxes</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    confs </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> result</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">boxes</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">conf</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cpu</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">numpy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic"># [N] confidences</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    classes </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> result</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">boxes</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cls</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cpu</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">numpy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># [N] class IDs</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> box</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> conf</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> cls </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token builtin">zip</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">boxes</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> confs</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> classes</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-interpolation string" style="color:#e3116c">f&quot;Detected </span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">model</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">.</span><span class="token string-interpolation interpolation">names</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">[</span><span class="token string-interpolation interpolation builtin">int</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">(</span><span class="token string-interpolation interpolation">cls</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">)</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">]</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c"> with </span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">conf</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">:</span><span class="token string-interpolation interpolation format-spec">.2f</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c"> confidence&quot;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p><strong>Expected performance:</strong></p>
<ul>
<li class=""><strong>COCO classes:</strong> 80 objects (person, car, cup, bottle, etc.)</li>
<li class=""><strong>Accuracy:</strong> 52.9% mAP (YOLOv8l)</li>
<li class=""><strong>Latency:</strong> 16ms (60 FPS on RTX 4070 Ti)</li>
<li class=""><strong>False positives:</strong> ~5-10% (tune confidence threshold)</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="sam-2-segment-anything-model">SAM 2: Segment Anything Model<a href="#sam-2-segment-anything-model" class="hash-link" aria-label="Direct link to SAM 2: Segment Anything Model" title="Direct link to SAM 2: Segment Anything Model" translate="no">​</a></h3>
<p><strong>SAM 2 (2024)</strong> is Meta&#x27;s foundation model for segmentation:</p>
<ul>
<li class="">Zero-shot segmentation (no fine-tuning needed)</li>
<li class="">Supports points, boxes, masks as prompts</li>
<li class="">Works on images AND videos</li>
<li class="">6x faster than SAM 1</li>
</ul>
<p><strong>Use cases for humanoids:</strong></p>
<ul>
<li class="">Segment unknown objects (not in COCO dataset)</li>
<li class="">Generate precise masks for grasp planning</li>
<li class="">Track objects across video frames</li>
</ul>
<p><strong>Installation:</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pip </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> segment-anything-2</span><br></span></code></pre></div></div>
<p><strong>Usage:</strong></p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> sam2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">build_sam </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> build_sam2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> sam2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">sam2_image_predictor </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> SAM2ImagePredictor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Load SAM 2 model</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">checkpoint </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;sam2_hiera_large.pt&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">model_cfg </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;sam2_hiera_l.yaml&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">predictor </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> SAM2ImagePredictor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">build_sam2</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">model_cfg</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> checkpoint</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Set image</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">predictor</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">set_image</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">rgb_image</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Prompt with bounding box from YOLOv8</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">input_box </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> np</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">array</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">x1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> y1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> x2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> y2</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># From YOLO detection</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">masks</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> scores</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> _ </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> predictor</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">predict</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    point_coords</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    point_labels</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    box</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">input_box</span><span class="token punctuation" style="color:#393A34">[</span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    multimask_output</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">False</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># masks[0] is binary mask (H, W)</span><br></span></code></pre></div></div>
<p><strong>YOLOv8 + SAM 2 Pipeline:</strong></p>
<ol>
<li class="">YOLOv8 detects objects → bounding boxes</li>
<li class="">For each box, run SAM 2 → precise segmentation mask</li>
<li class="">Use mask for grasp planning or obstacle avoidance</li>
</ol>
<p><strong>Expected performance:</strong></p>
<ul>
<li class=""><strong>Latency:</strong> 50-80ms per object (SAM 2 Large)</li>
<li class=""><strong>Accuracy:</strong> 95%+ IoU (Intersection over Union)</li>
<li class=""><strong>VRAM:</strong> 4.5 GB (SAM 2 Large)</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="grounding-dino-open-vocabulary-detection">Grounding DINO: Open-Vocabulary Detection<a href="#grounding-dino-open-vocabulary-detection" class="hash-link" aria-label="Direct link to Grounding DINO: Open-Vocabulary Detection" title="Direct link to Grounding DINO: Open-Vocabulary Detection" translate="no">​</a></h3>
<p><strong>Problem with YOLOv8:</strong> Only detects 80 pre-defined COCO classes.</p>
<p><strong>Grounding DINO (2023)</strong> detects ANY object from text prompt:</p>
<ul>
<li class="">&quot;red cup&quot; → detects red cups specifically</li>
<li class="">&quot;smartphone&quot; → detects phones (not in COCO)</li>
<li class="">&quot;potted plant with yellow flowers&quot; → fine-grained queries</li>
</ul>
<p><strong>Installation:</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pip </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> groundingdino-py</span><br></span></code></pre></div></div>
<p><strong>Usage:</strong></p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> groundingdino</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">util</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">inference </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Model</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">model </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Model</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    model_config_path</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;GroundingDINO_SwinT_OGC.py&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    model_checkpoint_path</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;groundingdino_swint_ogc.pth&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Detect with text prompt</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TEXT_PROMPT </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;red cup . blue bottle . smartphone&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">detections </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">predict_with_classes</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    image</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">rgb_image</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    classes</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">TEXT_PROMPT</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">split</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot; . &quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    box_threshold</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">0.35</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    text_threshold</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">0.25</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># detections.xyxy: bounding boxes [N, 4]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># detections.confidence: scores [N]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># detections.class_id: which prompt matched</span><br></span></code></pre></div></div>
<p><strong>When to use Grounding DINO:</strong></p>
<ul>
<li class="">Detecting objects not in COCO (tools, specific products)</li>
<li class="">Fine-grained queries (&quot;red cup&quot; vs &quot;blue cup&quot;)</li>
<li class="">Dynamic task specifications (&quot;pick up the tallest bottle&quot;)</li>
</ul>
<p><strong>Trade-off:</strong> Slower than YOLOv8 (150ms vs 16ms) but more flexible.</p>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="sensor-fusion">Sensor Fusion<a href="#sensor-fusion" class="hash-link" aria-label="Direct link to Sensor Fusion" title="Direct link to Sensor Fusion" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="why-fuse-multiple-sensors">Why Fuse Multiple Sensors?<a href="#why-fuse-multiple-sensors" class="hash-link" aria-label="Direct link to Why Fuse Multiple Sensors?" title="Direct link to Why Fuse Multiple Sensors?" translate="no">​</a></h3>
<p>Single sensor limitations:</p>
<ul>
<li class=""><strong>Camera:</strong> Fails in low light, affected by motion blur</li>
<li class=""><strong>LiDAR:</strong> No color/texture information, expensive</li>
<li class=""><strong>IMU:</strong> Drifts over time without visual correction</li>
</ul>
<p><strong>Sensor fusion</strong> combines complementary sensors for robustness.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="extended-kalman-filter-ekf-for-visual-inertial-odometry">Extended Kalman Filter (EKF) for Visual-Inertial Odometry<a href="#extended-kalman-filter-ekf-for-visual-inertial-odometry" class="hash-link" aria-label="Direct link to Extended Kalman Filter (EKF) for Visual-Inertial Odometry" title="Direct link to Extended Kalman Filter (EKF) for Visual-Inertial Odometry" translate="no">​</a></h3>
<!-- -->
<p><strong>Key idea:</strong></p>
<ul>
<li class=""><strong>Prediction:</strong> IMU provides high-frequency pose estimates (200 Hz)</li>
<li class=""><strong>Update:</strong> Camera corrects accumulated IMU drift (30 Hz)</li>
<li class=""><strong>Result:</strong> Smooth, drift-free pose at 200 Hz</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="robot-localization-ros-2-package">Robot Localization (ROS 2 Package)<a href="#robot-localization-ros-2-package" class="hash-link" aria-label="Direct link to Robot Localization (ROS 2 Package)" title="Direct link to Robot Localization (ROS 2 Package)" translate="no">​</a></h3>
<p><strong>robot_localization</strong> implements EKF/UKF for multi-sensor fusion:</p>
<p><strong>Installation:</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">apt</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> ros-iron-robot-localization</span><br></span></code></pre></div></div>
<p><strong>Configuration (<code>ekf_config.yaml</code>):</strong></p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">ekf_filter_node</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">ros__parameters</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">frequency</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">200.0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">sensor_timeout</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">two_d_mode</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Camera odometry (from ORB-SLAM3)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">odom0</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /orbslam3/odom</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">odom0_config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token boolean important" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># x, y, z</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                   false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># roll, pitch, yaw</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                   false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># vx, vy, vz</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                   false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># vroll, vpitch, vyaw</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                   false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># ax, ay, az</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">odom0_differential</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">odom0_relative</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># IMU data</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">imu0</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /camera/imu</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">imu0_config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token boolean important" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># x, y, z</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">     </span><span class="token comment" style="color:#999988;font-style:italic"># roll, pitch, yaw (orientation)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># vx, vy, vz</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">     </span><span class="token comment" style="color:#999988;font-style:italic"># vroll, vpitch, vyaw (angular vel)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">     </span><span class="token comment" style="color:#999988;font-style:italic"># ax, ay, az (linear accel)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">imu0_differential</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">imu0_relative</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">imu0_remove_gravitational_acceleration</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><br></span></code></pre></div></div>
<p><strong>Launch EKF:</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ros2 run robot_localization ekf_node --ros-args --params-file ekf_config.yaml</span><br></span></code></pre></div></div>
<p><strong>Output:</strong></p>
<ul>
<li class="">Fused odometry published to <code>/odometry/filtered</code></li>
<li class="">TF published: <code>odom → base_link</code></li>
</ul>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="performance-optimization">Performance Optimization<a href="#performance-optimization" class="hash-link" aria-label="Direct link to Performance Optimization" title="Direct link to Performance Optimization" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="target-latencies-for-real-time-perception">Target Latencies for Real-Time Perception<a href="#target-latencies-for-real-time-perception" class="hash-link" aria-label="Direct link to Target Latencies for Real-Time Perception" title="Direct link to Target Latencies for Real-Time Perception" translate="no">​</a></h3>
<table><thead><tr><th>Component</th><th>Target Latency</th><th>Notes</th></tr></thead><tbody><tr><td>Camera capture</td><td>&lt;5ms</td><td>Hardware-dependent</td></tr><tr><td>Image preprocessing</td><td>&lt;10ms</td><td>Rectification, alignment</td></tr><tr><td>Object detection (YOLOv8)</td><td>&lt;20ms</td><td>50+ FPS on RTX 4070 Ti</td></tr><tr><td>Depth processing</td><td>&lt;15ms</td><td>Point cloud generation</td></tr><tr><td>VSLAM frontend</td><td>&lt;30ms</td><td>Feature extraction + matching</td></tr><tr><td><strong>Total perception latency</strong></td><td><strong>&lt;100ms</strong></td><td><strong>For VLA integration</strong></td></tr></tbody></table>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="optimization-strategies">Optimization Strategies<a href="#optimization-strategies" class="hash-link" aria-label="Direct link to Optimization Strategies" title="Direct link to Optimization Strategies" translate="no">​</a></h3>
<p><strong>1. GPU Acceleration</strong></p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Use TensorRT for YOLOv8 (2-3x speedup)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> ultralytics </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> YOLO</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">model </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> YOLO</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;yolov8l.pt&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">export</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">format</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;engine&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Export to TensorRT</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">trt_model </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> YOLO</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;yolov8l.engine&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Load TensorRT model</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Latency: 16ms → 6ms on RTX 4070 Ti</span><br></span></code></pre></div></div>
<p><strong>2. Asynchronous Processing</strong></p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> threading</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">PerceptionPipeline</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">__init__</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">latest_image </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">None</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">latest_detections </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">None</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># Detection runs in background thread</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">detection_thread </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> threading</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Thread</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">target</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">_detection_loop</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> daemon</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">detection_thread</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">image_callback</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> msg</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">latest_image </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> msg  </span><span class="token comment" style="color:#999988;font-style:italic"># Non-blocking update</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">_detection_loop</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">while</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">latest_image </span><span class="token keyword" style="color:#00009f">is</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">not</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">latest_detections </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">detector</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">latest_image</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p><strong>3. Reduce Resolution for Detection</strong></p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># YOLOv8 accepts 640x640 input (not 1280x720)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Downsampling reduces computation by 3-4x</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">model </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> YOLO</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;yolov8l.pt&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">results </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> model</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">image</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> imgsz</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">640</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Faster than imgsz=1280</span><br></span></code></pre></div></div>
<p><strong>4. Skip Frames for Slow Models</strong></p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">frame_count </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> frame </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> camera_stream</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    frame_count </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Run YOLOv8 every frame (fast)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    detections </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> yolo_model</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">frame</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Run SAM 2 every 5th frame (slow)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> frame_count </span><span class="token operator" style="color:#393A34">%</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        masks </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> sam_model</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">frame</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> detections</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="debugging-perception-systems">Debugging Perception Systems<a href="#debugging-perception-systems" class="hash-link" aria-label="Direct link to Debugging Perception Systems" title="Direct link to Debugging Perception Systems" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="common-failure-modes">Common Failure Modes<a href="#common-failure-modes" class="hash-link" aria-label="Direct link to Common Failure Modes" title="Direct link to Common Failure Modes" translate="no">​</a></h3>
<p><strong>1. Low Detection Accuracy (&lt;60%)</strong></p>
<p><strong>Symptoms:</strong></p>
<ul>
<li class="">Objects not detected</li>
<li class="">Many false positives</li>
<li class="">Bounding boxes incorrect</li>
</ul>
<p><strong>Debugging steps:</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Check image quality</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ros2 topic hz /camera/color/image_raw  </span><span class="token comment" style="color:#999988;font-style:italic"># Should be 30 Hz</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ros2 topic </span><span class="token builtin class-name">echo</span><span class="token plain"> /camera/color/camera_info  </span><span class="token comment" style="color:#999988;font-style:italic"># Verify resolution</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Visualize raw detections</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ros2 run rqt_image_view rqt_image_view /yolo/detections</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Test on static image</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">python yolo_detector.py </span><span class="token parameter variable" style="color:#36acaa">--image</span><span class="token plain"> test.jpg </span><span class="token parameter variable" style="color:#36acaa">--visualize</span><br></span></code></pre></div></div>
<p><strong>Common causes:</strong></p>
<ul>
<li class=""><strong>Poor lighting:</strong> Add auxiliary lighting or use auto-exposure</li>
<li class=""><strong>Motion blur:</strong> Increase camera shutter speed</li>
<li class=""><strong>Wrong model:</strong> Use YOLOv8l instead of YOLOv8n for better accuracy</li>
<li class=""><strong>Low confidence threshold:</strong> Increase from 0.25 → 0.5</li>
</ul>
<p><strong>2. VSLAM Tracking Lost</strong></p>
<p><strong>Symptoms:</strong></p>
<ul>
<li class="">Robot pose jumps erratically</li>
<li class="">Map points disappear</li>
<li class="">&quot;Tracking lost&quot; warnings in ORB-SLAM3</li>
</ul>
<p><strong>Debugging steps:</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Check feature density</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ros2 topic </span><span class="token builtin class-name">echo</span><span class="token plain"> /orbslam3/tracking_state</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># State should be 2 (OK), not 1 (NOT_INITIALIZED) or 3 (LOST)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Visualize tracked features</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Green points = good, red points = lost</span><br></span></code></pre></div></div>
<p><strong>Common causes:</strong></p>
<ul>
<li class=""><strong>Low-texture scenes:</strong> Add visual markers (AprilTags, posters)</li>
<li class=""><strong>Fast motion:</strong> Reduce robot speed during navigation</li>
<li class=""><strong>Camera motion blur:</strong> Use global shutter camera (avoid rolling shutter)</li>
<li class=""><strong>Lighting changes:</strong> Disable auto-exposure, use fixed exposure</li>
</ul>
<p><strong>3. Depth Noise and Holes</strong></p>
<p><strong>Symptoms:</strong></p>
<ul>
<li class="">Depth image has black holes (no data)</li>
<li class="">Noisy point clouds (scattered points)</li>
<li class="">Depth values jump erratically</li>
</ul>
<p><strong>Debugging:</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Visualize depth image</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ros2 run rqt_image_view rqt_image_view /camera/depth/image_rect_raw</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Check depth quality</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ros2 topic hz /camera/depth/image_rect_raw  </span><span class="token comment" style="color:#999988;font-style:italic"># Should be 30 Hz</span><br></span></code></pre></div></div>
<p><strong>Common causes:</strong></p>
<ul>
<li class=""><strong>Infrared interference:</strong> Avoid sunlight, multiple RealSense cameras</li>
<li class=""><strong>Reflective surfaces:</strong> Glass, mirrors, polished metal (no depth return)</li>
<li class=""><strong>Transparent objects:</strong> Water, clear plastic (infrared passes through)</li>
<li class=""><strong>Distance limits:</strong> Objects &gt;6m (D455 max range)</li>
</ul>
<p><strong>Solutions:</strong></p>
<ul>
<li class="">Use depth hole filling (OpenCV inpainting)</li>
<li class="">Switch to stereo depth (ZED 2i) for outdoor use</li>
<li class="">Add texture to reflective surfaces (masking tape, stickers)</li>
</ul>
<p><strong>4. High Latency (&gt;200ms)</strong></p>
<p><strong>Symptoms:</strong></p>
<ul>
<li class="">Robot reacts slowly to obstacles</li>
<li class="">VLA pipeline timeout errors</li>
</ul>
<p><strong>Profiling:</strong></p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> time</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">start </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> time</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">time</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">detections </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> yolo_model</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">image</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-interpolation string" style="color:#e3116c">f&quot;YOLOv8 latency: </span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">(</span><span class="token string-interpolation interpolation">time</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">.</span><span class="token string-interpolation interpolation">time</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">(</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">)</span><span class="token string-interpolation interpolation"> </span><span class="token string-interpolation interpolation operator" style="color:#393A34">-</span><span class="token string-interpolation interpolation"> start</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">)</span><span class="token string-interpolation interpolation"> </span><span class="token string-interpolation interpolation operator" style="color:#393A34">*</span><span class="token string-interpolation interpolation"> </span><span class="token string-interpolation interpolation number" style="color:#36acaa">1000</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">:</span><span class="token string-interpolation interpolation format-spec">.1f</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">ms&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">start </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> time</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">time</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">point_cloud </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> depth_processor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">depth_image</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-interpolation string" style="color:#e3116c">f&quot;Depth processing: </span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">(</span><span class="token string-interpolation interpolation">time</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">.</span><span class="token string-interpolation interpolation">time</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">(</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">)</span><span class="token string-interpolation interpolation"> </span><span class="token string-interpolation interpolation operator" style="color:#393A34">-</span><span class="token string-interpolation interpolation"> start</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">)</span><span class="token string-interpolation interpolation"> </span><span class="token string-interpolation interpolation operator" style="color:#393A34">*</span><span class="token string-interpolation interpolation"> </span><span class="token string-interpolation interpolation number" style="color:#36acaa">1000</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">:</span><span class="token string-interpolation interpolation format-spec">.1f</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">ms&quot;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p><strong>Solutions:</strong></p>
<ul>
<li class="">Use TensorRT for YOLOv8 (2-3x speedup)</li>
<li class="">Reduce image resolution (1280x720 → 640x480)</li>
<li class="">Use smaller model (YOLOv8l → YOLOv8m)</li>
<li class="">Profile with <code>nvprof</code> to find bottlenecks</li>
</ul>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="integration-example-perception-for-manipulation">Integration Example: Perception for Manipulation<a href="#integration-example-perception-for-manipulation" class="hash-link" aria-label="Direct link to Integration Example: Perception for Manipulation" title="Direct link to Integration Example: Perception for Manipulation" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="end-to-end-workflow">End-to-End Workflow<a href="#end-to-end-workflow" class="hash-link" aria-label="Direct link to End-to-End Workflow" title="Direct link to End-to-End Workflow" translate="no">​</a></h3>
<p><strong>Task:</strong> &quot;Pick up the red cup from the table&quot;</p>
<p><strong>Perception pipeline:</strong></p>
<!-- -->
<p><strong>Code example:</strong></p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 1. Detect all cups with YOLOv8</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">results </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> yolo_model</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">rgb_image</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cup_boxes </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">box </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> box</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> cls </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token builtin">zip</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">results</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">boxes</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">xyxy</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> results</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">boxes</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cls</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">names</span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">int</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cls</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;cup&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 2. Filter to red cups with Grounding DINO</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">red_cup_boxes </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> grounding_dino_model</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">rgb_image</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;red cup&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 3. Segment cup with SAM 2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cup_mask </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> sam_model</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">rgb_image</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> red_cup_boxes</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 4. Get 3D position from depth</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cup_3d_pos </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> get_3d_position</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cup_mask</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> depth_image</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> camera_intrinsics</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 5. Send to VLA model</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vla_input </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&#x27;image&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> rgb_image</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&#x27;text&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;pick up red cup&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&#x27;target_position&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> cup_3d_pos</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">actions </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> vla_model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">predict</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">vla_input</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="further-reading">Further Reading<a href="#further-reading" class="hash-link" aria-label="Direct link to Further Reading" title="Direct link to Further Reading" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="research-papers">Research Papers<a href="#research-papers" class="hash-link" aria-label="Direct link to Research Papers" title="Direct link to Research Papers" translate="no">​</a></h3>
<ol>
<li class=""><strong>ORB-SLAM3</strong> (2021) - <a href="https://arxiv.org/abs/2007.11898" target="_blank" rel="noopener noreferrer" class="">arXiv:2007.11898</a>
<ul>
<li class="">State-of-the-art visual-inertial SLAM with loop closure</li>
</ul>
</li>
<li class=""><strong>YOLOv8</strong> (2023) - <a href="https://docs.ultralytics.com" target="_blank" rel="noopener noreferrer" class="">Ultralytics Docs</a>
<ul>
<li class="">Real-time object detection improvements</li>
</ul>
</li>
<li class=""><strong>SAM 2</strong> (2024) - <a href="https://arxiv.org/abs/2408.00714" target="_blank" rel="noopener noreferrer" class="">arXiv:2408.00714</a>
<ul>
<li class="">Segment Anything in images and videos</li>
</ul>
</li>
<li class=""><strong>Grounding DINO</strong> (2023) - <a href="https://arxiv.org/abs/2303.05499" target="_blank" rel="noopener noreferrer" class="">arXiv:2303.05499</a>
<ul>
<li class="">Open-vocabulary detection with text prompts</li>
</ul>
</li>
<li class=""><strong>VINS-Fusion</strong> (2019) - <a href="https://arxiv.org/abs/1901.03642" target="_blank" rel="noopener noreferrer" class="">arXiv:1901.03642</a>
<ul>
<li class="">Visual-inertial odometry with global optimization</li>
</ul>
</li>
</ol>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="open-source-repositories">Open-Source Repositories<a href="#open-source-repositories" class="hash-link" aria-label="Direct link to Open-Source Repositories" title="Direct link to Open-Source Repositories" translate="no">​</a></h3>
<ul>
<li class=""><strong>ORB-SLAM3:</strong> <a href="https://github.com/UZ-SLAMLab/ORB_SLAM3" target="_blank" rel="noopener noreferrer" class="">github.com/UZ-SLAMLab/ORB_SLAM3</a></li>
<li class=""><strong>YOLOv8:</strong> <a href="https://github.com/ultralytics/ultralytics" target="_blank" rel="noopener noreferrer" class="">github.com/ultralytics/ultralytics</a></li>
<li class=""><strong>SAM 2:</strong> <a href="https://github.com/facebookresearch/segment-anything-2" target="_blank" rel="noopener noreferrer" class="">github.com/facebookresearch/segment-anything-2</a></li>
<li class=""><strong>Grounding DINO:</strong> <a href="https://github.com/IDEA-Research/GroundingDINO" target="_blank" rel="noopener noreferrer" class="">github.com/IDEA-Research/GroundingDINO</a></li>
<li class=""><strong>RealSense ROS 2:</strong> <a href="https://github.com/IntelRealSense/realsense-ros" target="_blank" rel="noopener noreferrer" class="">github.com/IntelRealSense/realsense-ros</a></li>
<li class=""><strong>robot_localization:</strong> <a href="https://github.com/cra-ros-pkg/robot_localization" target="_blank" rel="noopener noreferrer" class="">github.com/cra-ros-pkg/robot_localization</a></li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="ros-2-documentation">ROS 2 Documentation<a href="#ros-2-documentation" class="hash-link" aria-label="Direct link to ROS 2 Documentation" title="Direct link to ROS 2 Documentation" translate="no">​</a></h3>
<ul>
<li class=""><strong>tf2:</strong> <a href="https://docs.ros.org/en/iron/Tutorials/Intermediate/Tf2/" target="_blank" rel="noopener noreferrer" class="">docs.ros.org/en/iron/Tutorials/Intermediate/Tf2/</a></li>
<li class=""><strong>sensor_msgs:</strong> <a href="https://docs.ros2.org/latest/api/sensor_msgs/" target="_blank" rel="noopener noreferrer" class="">docs.ros2.org/latest/api/sensor_msgs/</a></li>
<li class=""><strong>image_transport:</strong> <a href="https://github.com/ros-perception/image_common" target="_blank" rel="noopener noreferrer" class="">github.com/ros-perception/image_common</a></li>
</ul>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="summary">Summary<a href="#summary" class="hash-link" aria-label="Direct link to Summary" title="Direct link to Summary" translate="no">​</a></h2>
<p>In this chapter, you learned:</p>
<ul>
<li class="">✅ <strong>RGB-D camera setup</strong> with Intel RealSense D455 on ROS 2</li>
<li class="">✅ <strong>Depth processing</strong> for 3D point cloud generation</li>
<li class="">✅ <strong>Visual SLAM</strong> with ORB-SLAM3 for localization and mapping</li>
<li class="">✅ <strong>Object detection</strong> with YOLOv8 (52.9% mAP, 60 FPS)</li>
<li class="">✅ <strong>Segmentation</strong> with SAM 2 for precise object masks</li>
<li class="">✅ <strong>Open-vocabulary detection</strong> with Grounding DINO</li>
<li class="">✅ <strong>Sensor fusion</strong> with Extended Kalman Filter (camera + IMU)</li>
<li class="">✅ <strong>Performance optimization</strong> achieving &lt;100ms perception latency</li>
<li class="">✅ <strong>Debugging strategies</strong> for common perception failures</li>
</ul>
<p><strong>Next steps:</strong></p>
<ul>
<li class=""><strong>Chapter 08:</strong> Bipedal Locomotion (gait generation, balance control)</li>
<li class=""><strong>Chapter 09:</strong> Dexterous Manipulation (grasp planning, IK, force control)</li>
<li class=""><strong>Capstone Project:</strong> Integrate perception with VLA for autonomous butler</li>
</ul>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Practical Exercise</div><div class="admonitionContent_BuS1"><p><strong>Build your own perception pipeline:</strong></p><ol>
<li class="">Set up RealSense D455 camera on ROS 2</li>
<li class="">Run ORB-SLAM3 for real-time localization</li>
<li class="">Deploy YOLOv8 for object detection</li>
<li class="">Achieve &gt;85% detection accuracy in Isaac Sim test scene</li>
<li class="">Measure end-to-end perception latency (&lt;100ms target)</li>
</ol><p><strong>Time estimate:</strong> 2-3 hours
<strong>Difficulty:</strong> Intermediate
<strong>Hardware:</strong> RealSense D455, RTX 4070 Ti</p></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href="https://github.com/MuhammadWaqasrafiq/HumanoidRoboticsBook/tree/main/docs/perception-stack/index.mdx" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/HumanoidRoboticsBook/docs/isaac-platform"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">06. NVIDIA Isaac Platform</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/HumanoidRoboticsBook/docs/bipedal-locomotion"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">08. Bipedal Locomotion</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#what-youll-learn" class="table-of-contents__link toc-highlight">What You&#39;ll Learn</a></li><li><a href="#prerequisites" class="table-of-contents__link toc-highlight">Prerequisites</a></li><li><a href="#why-perception-matters" class="table-of-contents__link toc-highlight">Why Perception Matters</a></li><li><a href="#perception-pipeline-architecture" class="table-of-contents__link toc-highlight">Perception Pipeline Architecture</a></li><li><a href="#rgb-d-camera-setup" class="table-of-contents__link toc-highlight">RGB-D Camera Setup</a><ul><li><a href="#supported-cameras-2026-market" class="table-of-contents__link toc-highlight">Supported Cameras (2026 Market)</a></li><li><a href="#realsense-d455-ros-2-installation" class="table-of-contents__link toc-highlight">RealSense D455 ROS 2 Installation</a></li><li><a href="#camera-calibration" class="table-of-contents__link toc-highlight">Camera Calibration</a></li></ul></li><li><a href="#depth-processing-and-point-clouds" class="table-of-contents__link toc-highlight">Depth Processing and Point Clouds</a><ul><li><a href="#depth-image-to-point-cloud-conversion" class="table-of-contents__link toc-highlight">Depth Image to Point Cloud Conversion</a></li><li><a href="#point-cloud-generation" class="table-of-contents__link toc-highlight">Point Cloud Generation</a></li><li><a href="#visualizing-point-clouds-in-rviz2" class="table-of-contents__link toc-highlight">Visualizing Point Clouds in RViz2</a></li></ul></li><li><a href="#visual-slam-vslam" class="table-of-contents__link toc-highlight">Visual SLAM (VSLAM)</a><ul><li><a href="#what-is-vslam" class="table-of-contents__link toc-highlight">What is VSLAM?</a></li><li><a href="#vslam-pipeline" class="table-of-contents__link toc-highlight">VSLAM Pipeline</a></li><li><a href="#orb-slam3-setup-recommended" class="table-of-contents__link toc-highlight">ORB-SLAM3 Setup (Recommended)</a></li><li><a href="#vslam-alternatives" class="table-of-contents__link toc-highlight">VSLAM Alternatives</a></li></ul></li><li><a href="#object-detection-and-segmentation" class="table-of-contents__link toc-highlight">Object Detection and Segmentation</a><ul><li><a href="#yolov8-real-time-object-detection" class="table-of-contents__link toc-highlight">YOLOv8: Real-Time Object Detection</a></li><li><a href="#yolov8-ros-2-integration" class="table-of-contents__link toc-highlight">YOLOv8 ROS 2 Integration</a></li><li><a href="#sam-2-segment-anything-model" class="table-of-contents__link toc-highlight">SAM 2: Segment Anything Model</a></li><li><a href="#grounding-dino-open-vocabulary-detection" class="table-of-contents__link toc-highlight">Grounding DINO: Open-Vocabulary Detection</a></li></ul></li><li><a href="#sensor-fusion" class="table-of-contents__link toc-highlight">Sensor Fusion</a><ul><li><a href="#why-fuse-multiple-sensors" class="table-of-contents__link toc-highlight">Why Fuse Multiple Sensors?</a></li><li><a href="#extended-kalman-filter-ekf-for-visual-inertial-odometry" class="table-of-contents__link toc-highlight">Extended Kalman Filter (EKF) for Visual-Inertial Odometry</a></li><li><a href="#robot-localization-ros-2-package" class="table-of-contents__link toc-highlight">Robot Localization (ROS 2 Package)</a></li></ul></li><li><a href="#performance-optimization" class="table-of-contents__link toc-highlight">Performance Optimization</a><ul><li><a href="#target-latencies-for-real-time-perception" class="table-of-contents__link toc-highlight">Target Latencies for Real-Time Perception</a></li><li><a href="#optimization-strategies" class="table-of-contents__link toc-highlight">Optimization Strategies</a></li></ul></li><li><a href="#debugging-perception-systems" class="table-of-contents__link toc-highlight">Debugging Perception Systems</a><ul><li><a href="#common-failure-modes" class="table-of-contents__link toc-highlight">Common Failure Modes</a></li></ul></li><li><a href="#integration-example-perception-for-manipulation" class="table-of-contents__link toc-highlight">Integration Example: Perception for Manipulation</a><ul><li><a href="#end-to-end-workflow" class="table-of-contents__link toc-highlight">End-to-End Workflow</a></li></ul></li><li><a href="#further-reading" class="table-of-contents__link toc-highlight">Further Reading</a><ul><li><a href="#research-papers" class="table-of-contents__link toc-highlight">Research Papers</a></li><li><a href="#open-source-repositories" class="table-of-contents__link toc-highlight">Open-Source Repositories</a></li><li><a href="#ros-2-documentation" class="table-of-contents__link toc-highlight">ROS 2 Documentation</a></li></ul></li><li><a href="#summary" class="table-of-contents__link toc-highlight">Summary</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Learn</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/HumanoidRoboticsBook/docs/intro">Introduction</a></li><li class="footer__item"><a class="footer__link-item" href="/HumanoidRoboticsBook/docs/why-physical-ai">Why Physical AI</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Resources</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/MuhammadWaqasrafiq/HumanoidRoboticsBook" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub Repo<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://github.com/MuhammadWaqasrafiq/HumanoidRoboticsBook/tree/main/code-examples" target="_blank" rel="noopener noreferrer" class="footer__link-item">Code Samples<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Connect</div><ul class="footer__items clean-list"><li class="footer__item">
<div style="display:flex; gap:1.5rem; margin-bottom:1rem;">
  <a href="https://github.com/MuhammadWaqasrafiq/HumanoidRoboticsBook" target="_blank" rel="noopener noreferrer" aria-label="GitHub" style="color:#fff;font-size:1.6rem;">
    <i class="fa-brands fa-github"></i>
  </a>
  <a href="https://linkedin.com/in/MuhammadWaqasrafiq" target="_blank" rel="noopener noreferrer" aria-label="LinkedIn" style="color:#fff;font-size:1.6rem;">
    <i class="fa-brands fa-linkedin"></i>
  </a>
  <a href="https://wa.me/923463033195" target="_blank" rel="noopener noreferrer" aria-label="WhatsApp" style="color:#fff;font-size:1.6rem;">
    <i class="fa-brands fa-whatsapp"></i>
  </a>
  <a href="https://www.youtube.com/watch?v=dZTfXiPSZyE" target="_blank" rel="noopener noreferrer" aria-label="YouTube" style="color:#fff;font-size:1.6rem;">
    <i class="fa-brands fa-youtube"></i>
  </a>
</div>
              </li><li class="footer__item"><a href="https://github.com/MuhammadWaqasrafiq/HumanoidRoboticsBook/blob/main/LICENSE" target="_blank" rel="noopener noreferrer" class="footer__link-item">MIT License<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">© 2025 Embodied AI • Muhammad Waqas Rafiq • MIT & CC-BY-4.0</div></div></div></footer></div>
</body>
</html>