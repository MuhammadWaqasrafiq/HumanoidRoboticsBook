<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-bipedal-locomotion/quiz" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Chapter 08 Quiz - Bipedal Locomotion | Embodied AI: The Future of Robotics</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://muhammadwaqasrafiq.github.io/HumanoidRoboticsBook/img/social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://muhammadwaqasrafiq.github.io/HumanoidRoboticsBook/img/social-card.jpg"><meta data-rh="true" property="og:url" content="https://muhammadwaqasrafiq.github.io/HumanoidRoboticsBook/docs/bipedal-locomotion/quiz"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Chapter 08 Quiz - Bipedal Locomotion | Embodied AI: The Future of Robotics"><meta data-rh="true" name="description" content="Test your understanding of gait generation, ZMP theory, balance control, whole-body control, and humanoid walking"><meta data-rh="true" property="og:description" content="Test your understanding of gait generation, ZMP theory, balance control, whole-body control, and humanoid walking"><link data-rh="true" rel="icon" href="/HumanoidRoboticsBook/img/new_logo.svg"><link data-rh="true" rel="canonical" href="https://muhammadwaqasrafiq.github.io/HumanoidRoboticsBook/docs/bipedal-locomotion/quiz"><link data-rh="true" rel="alternate" href="https://muhammadwaqasrafiq.github.io/HumanoidRoboticsBook/docs/bipedal-locomotion/quiz" hreflang="en"><link data-rh="true" rel="alternate" href="https://muhammadwaqasrafiq.github.io/HumanoidRoboticsBook/docs/bipedal-locomotion/quiz" hreflang="x-default"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"><link rel="stylesheet" href="/HumanoidRoboticsBook/assets/css/styles.a6d7e190.css">
<script src="/HumanoidRoboticsBook/assets/js/runtime~main.803ab506.js" defer="defer"></script>
<script src="/HumanoidRoboticsBook/assets/js/main.a5cf34ea.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/HumanoidRoboticsBook/"><div class="navbar__logo"><img src="/HumanoidRoboticsBook/img/new_logo.svg" alt="Embodied AI Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/HumanoidRoboticsBook/img/new_logo.svg" alt="Embodied AI Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Embodied AI</b></a><a class="navbar__item navbar__link" href="/HumanoidRoboticsBook/docs/intro">Book</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/MuhammadWaqasrafiq/HumanoidRoboticsBook" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><main class="docMainContainer_TBSr docMainContainerEnhanced_lQrH"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Chapter 08 Quiz: Bipedal Locomotion</h1></header>
<p>Test your mastery of bipedal locomotion control and balance algorithms!</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Quiz Instructions</div><div class="admonitionContent_BuS1"><ul>
<li class="">10 questions covering gait fundamentals through advanced locomotion control</li>
<li class="">Each question has detailed explanations</li>
<li class="">Score 80% or higher to demonstrate mastery</li>
<li class="">Review relevant sections if you score below 80%</li>
</ul></div></div>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="question-1-zmp-stability-criterion">Question 1: ZMP Stability Criterion<a href="#question-1-zmp-stability-criterion" class="hash-link" aria-label="Direct link to Question 1: ZMP Stability Criterion" title="Direct link to Question 1: ZMP Stability Criterion" translate="no">​</a></h2>
<p><strong>A humanoid robot is walking with its Center of Mass (COM) at position (0.2, 0.05, 0.9) meters. The support polygon (one foot on ground) spans x: [0, 0.24], y: [-0.05, 0.05]. Is the robot stable?</strong></p>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>A) Yes - COM projection falls inside support polygon</summary><div><div class="collapsibleContent_i85q"><p>✅ <strong>Correct - Robot is Stable!</strong></p><p><strong>ZMP stability analysis:</strong></p><p><strong>Support polygon boundaries:</strong></p><ul>
<li class="">x-range: [0, 0.24] meters (foot length)</li>
<li class="">y-range: [-0.05, 0.05] meters (foot width)</li>
</ul><p><strong>COM projection onto ground:</strong></p><ul>
<li class="">COM position: (0.2, 0.05, 0.9)</li>
<li class="">Ground projection: (0.2, 0.05) (ignore z-coordinate)</li>
</ul><p><strong>Stability check:</strong></p><ol>
<li class="">x-coordinate: 0.2 ∈ [0, 0.24] ✓ Inside</li>
<li class="">y-coordinate: 0.05 ∈ [-0.05, 0.05] ✓ Inside (at boundary)</li>
</ol><p><strong>Result:</strong> COM projection is inside support polygon → <strong>Stable</strong></p><p><strong>Why this matters:</strong></p><ul>
<li class="">ZMP stability criterion: Robot stable if ZMP (≈ COM ground projection) lies inside support polygon</li>
<li class="">This robot is stable but close to tipping (y = 0.05 at edge)</li>
<li class="">Small lateral perturbation could cause instability</li>
</ul><p><strong>Safety margin calculation:</strong></p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> numpy </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> np</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">com_projection </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> np</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">array</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0.2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.05</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">support_polygon </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&#x27;x_min&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;x_max&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.24</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&#x27;y_min&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">0.05</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;y_max&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.05</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Distance to nearest boundary</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">margin_x </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">min</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">abs</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0.2</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">abs</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0.24</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 0.04m</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">margin_y </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">min</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">abs</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0.05</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">0.05</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">abs</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0.05</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.05</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 0.0m (at edge!)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-interpolation string" style="color:#e3116c">f&quot;Safety margin: x=</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">margin_x</span><span class="token string-interpolation interpolation operator" style="color:#393A34">*</span><span class="token string-interpolation interpolation number" style="color:#36acaa">100</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">:</span><span class="token string-interpolation interpolation format-spec">.1f</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">cm, y=</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">margin_y</span><span class="token string-interpolation interpolation operator" style="color:#393A34">*</span><span class="token string-interpolation interpolation number" style="color:#36acaa">100</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">:</span><span class="token string-interpolation interpolation format-spec">.1f</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">cm&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Output: Safety margin: x=4.0cm, y=0.0cm (WARNING: lateral instability risk)</span><br></span></code></pre></div></div><p><strong>Best practice:</strong> Maintain ≥2cm safety margin from polygon edges.</p></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>B) No - COM is too high (0.9m), causing instability</summary><div><div class="collapsibleContent_i85q"><p>❌ <strong>Incorrect - Height Doesn&#x27;t Determine Stability</strong></p><p><strong>Common misconception:</strong> Taller COMs are less stable.</p><p><strong>Truth:</strong> ZMP stability depends on <strong>horizontal</strong> COM position relative to support polygon, not vertical height.</p><p><strong>Height effects (secondary):</strong></p><ul>
<li class="">Higher COM → longer pendulum arm → slower recovery time</li>
<li class="">But stability criterion only checks (x, y) projection</li>
</ul><p><strong>In this case:</strong> Robot is stable despite 0.9m height because (0.2, 0.05) is inside polygon.</p></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>C) No - Single support phase is always unstable</summary><div><div class="collapsibleContent_i85q"><p>❌ <strong>Incorrect - Single Support Can Be Stable</strong></p><p><strong>Single support stability:</strong></p><ul>
<li class="">Stable if ZMP inside support polygon (one foot)</li>
<li class="">Requires active balance control</li>
<li class="">Humans spend 60-70% of gait cycle in single support</li>
</ul><p><strong>This scenario:</strong> Single support phase with stable ZMP.</p><p><strong>When single support fails:</strong> If COM projection falls outside foot boundary.</p></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>D) Cannot determine without knowing foot orientation</summary><div><div class="collapsibleContent_i85q"><p>❌ <strong>Incorrect - Sufficient Information Given</strong></p><p><strong>Given data includes:</strong></p><ul>
<li class="">Support polygon bounds (aligned with x-y axes)</li>
<li class="">COM position</li>
</ul><p><strong>Assumption:</strong> Support polygon already accounts for foot orientation.</p><p><strong>Verdict:</strong> Stable (COM inside polygon).</p></div></div></details>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="question-2-gait-cycle-phases">Question 2: Gait Cycle Phases<a href="#question-2-gait-cycle-phases" class="hash-link" aria-label="Direct link to Question 2: Gait Cycle Phases" title="Direct link to Question 2: Gait Cycle Phases" translate="no">​</a></h2>
<p><strong>During normal walking at 0.5 m/s, what percentage of the gait cycle is spent in double support (both feet on ground)?</strong></p>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>A) 0% - There&#x27;s always one foot in the air</summary><div><div class="collapsibleContent_i85q"><p>❌ <strong>Incorrect - Confusing Walking with Running</strong></p><p><strong>Running characteristics:</strong></p><ul>
<li class="">0% double support</li>
<li class="">Flight phase (both feet off ground)</li>
<li class="">Speed &gt; 2.0 m/s typically</li>
</ul><p><strong>Walking:</strong> Always has double support phase (except running).</p></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>B) 10-20% of the gait cycle</summary><div><div class="collapsibleContent_i85q"><p>✅ <strong>Correct!</strong></p><p><strong>Double support in walking:</strong></p><p><strong>Typical gait cycle breakdown (walking at 0.5 m/s):</strong></p><ol>
<li class=""><strong>Right heel strike</strong> → Double support starts (10-20% duration)</li>
<li class=""><strong>Left toe-off</strong> → Single support (right foot) (30-40% duration)</li>
<li class=""><strong>Left heel strike</strong> → Double support again (10-20% duration)</li>
<li class=""><strong>Right toe-off</strong> → Single support (left foot) (30-40% duration)</li>
<li class=""><strong>Repeat cycle</strong></li>
</ol><p><strong>Double support ratio:</strong></p><ul>
<li class=""><strong>Walking (0.3-1.5 m/s):</strong> 10-20% per transition × 2 transitions = 20-40% total</li>
<li class=""><strong>Each transition:</strong> 10-20% of cycle</li>
<li class=""><strong>Faster walking:</strong> Shorter double support (~10%)</li>
<li class=""><strong>Slower walking:</strong> Longer double support (~25%)</li>
</ul><p><strong>Why double support matters:</strong></p><ol>
<li class=""><strong>Weight transfer:</strong> Smooth transition between feet</li>
<li class=""><strong>Stability:</strong> Lower risk of falling (two contact points)</li>
<li class=""><strong>Gait planning:</strong> Critical for ZMP trajectory continuity</li>
</ol><p><strong>Real-world measurement:</strong></p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Typical walking gait at 0.5 m/s</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cycle_time </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1.1</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># seconds (total stride)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">double_support_1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.12</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># seconds (first transition)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">single_support_R </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.43</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># seconds (right foot)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">double_support_2 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.12</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># seconds (second transition)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">single_support_L </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.43</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># seconds (left foot)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">double_support_percentage </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">double_support_1 </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> double_support_2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> cycle_time </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-interpolation string" style="color:#e3116c">f&quot;Double support: </span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">double_support_percentage</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">:</span><span class="token string-interpolation interpolation format-spec">.1f</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">%&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Output: Double support: 21.8%</span><br></span></code></pre></div></div><p><strong>Speed dependency:</strong></p><ul>
<li class="">0.3 m/s (slow): 25-30% double support</li>
<li class="">0.5 m/s (normal): 18-22% double support</li>
<li class="">1.0 m/s (brisk): 10-12% double support</li>
<li class="">2.0+ m/s (running): 0% (flight phase instead)</li>
</ul></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>C) 50% - Equal time on one vs two feet</summary><div><div class="collapsibleContent_i85q"><p>❌ <strong>Too High</strong></p><p><strong>Problem:</strong> Would mean half the cycle with both feet down.</p><p><strong>Reality:</strong> Majority of walking is single support (~60-70%).</p><p><strong>At 0.5 m/s:</strong> Only 18-22% double support.</p></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>D) 100% - Both feet always touch ground during walking</summary><div><div class="collapsibleContent_i85q"><p>❌ <strong>Incorrect - Confusing Walking Definition</strong></p><p><strong>Walking requires:</strong></p><ul>
<li class="">At least one foot on ground (always)</li>
<li class="">Alternating single and double support</li>
</ul><p><strong>100% double support:</strong> Would be shuffling, not walking.</p></div></div></details>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="question-3-balance-recovery-strategies">Question 3: Balance Recovery Strategies<a href="#question-3-balance-recovery-strategies" class="hash-link" aria-label="Direct link to Question 3: Balance Recovery Strategies" title="Direct link to Question 3: Balance Recovery Strategies" translate="no">​</a></h2>
<p><strong>Your humanoid experiences a forward push (0.3m perturbation). Which balance recovery strategy should engage FIRST?</strong></p>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>A) Ankle strategy - Torque at ankle joint to shift COM</summary><div><div class="collapsibleContent_i85q"><p>✅ <strong>Correct - First Line of Defense!</strong></p><p><strong>Balance recovery hierarchy:</strong></p><p><strong>1. Ankle Strategy (First Response)</strong></p><ul>
<li class=""><strong>When:</strong> Small perturbations (&lt;0.15m COM shift)</li>
<li class=""><strong>How:</strong> Apply torque at ankle joint to create counter-moment</li>
<li class=""><strong>Speed:</strong> Fastest response (~100-200ms)</li>
<li class=""><strong>Energy:</strong> Minimal actuator effort</li>
</ul><p><strong>Why ankle strategy is first:</strong></p><ul>
<li class="">No foot movement needed (foot stays planted)</li>
<li class="">Fastest response time</li>
<li class="">Works for small disturbances</li>
</ul><p><strong>Biomechanics:</strong></p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Forward push → COM shifts forward</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Ankle plantarflexion → Creates backward moment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Result → COM returns to center</span><br></span></code></pre></div></div><p><strong>Implementation:</strong></p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">AnkleStrategy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">__init__</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">k_ankle </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">500.0</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># N·m/rad (ankle stiffness)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">max_ankle_torque </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">50.0</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># N·m</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">compute_recovery_torque</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> com_error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token triple-quoted-string string" style="color:#e3116c">&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        com_error: meters (COM displacement from support center)</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        &quot;&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># Proportional control</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        desired_ankle_angle </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">com_error </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.5</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># rad</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ankle_torque </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">k_ankle </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> desired_ankle_angle</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># Saturate</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ankle_torque </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> np</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">clip</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ankle_torque</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">max_ankle_torque</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                               self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">max_ankle_torque</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> ankle_torque</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Forward push: 0.3m perturbation</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">com_error </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.3</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># meters</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ankle_strategy </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> AnkleStrategy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">torque </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ankle_strategy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">compute_recovery_torque</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">com_error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-interpolation string" style="color:#e3116c">f&quot;Ankle recovery torque: </span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">torque</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">:</span><span class="token string-interpolation interpolation format-spec">.1f</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c"> N·m&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Output: Ankle recovery torque: 50.0 N·m (saturated - ankle strategy insufficient!)</span><br></span></code></pre></div></div><p><strong>NOTE:</strong> For 0.3m perturbation, ankle strategy will saturate → must escalate to hip strategy!</p><p><strong>Recovery cascade:</strong></p><ol>
<li class=""><strong>&lt;0.15m:</strong> Ankle strategy (sufficient)</li>
<li class=""><strong>0.15-0.5m:</strong> Hip strategy (this case)</li>
<li class=""><strong>&gt;0.5m:</strong> Stepping strategy</li>
</ol></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>B) Hip strategy - Bend at hips to move COM quickly</summary><div><div class="collapsibleContent_i85q"><p>✅ <strong>Also Correct for Large Perturbations</strong></p><p><strong>Hip strategy characteristics:</strong></p><p><strong>When to use:</strong></p><ul>
<li class="">Medium-to-large perturbations (0.15-0.5m)</li>
<li class="">Ankle strategy saturated</li>
<li class="">Need faster COM motion than ankle alone</li>
</ul><p><strong>How it works:</strong></p><ol>
<li class="">Bend forward at hips</li>
<li class="">Creates large moment arm</li>
<li class="">Shifts COM backward rapidly</li>
<li class="">Counteracts forward push</li>
</ol><p><strong>For 0.3m perturbation:</strong></p><ul>
<li class=""><strong>Ankle strategy:</strong> Insufficient (saturates at ~0.15m recovery)</li>
<li class=""><strong>Hip strategy:</strong> Appropriate response</li>
<li class=""><strong>Stepping:</strong> Not yet needed</li>
</ul><p><strong>Why hip after ankle:</strong></p><ul>
<li class="">Hip strategy is <strong>second line</strong> of defense</li>
<li class="">Ankle tried first (but saturates)</li>
<li class="">Hip engages when ankle insufficient</li>
</ul><p><strong>Trade-offs:</strong></p><ul>
<li class=""><strong>Faster COM motion</strong> than ankle</li>
<li class=""><strong>Higher energy</strong> consumption</li>
<li class=""><strong>More complex</strong> coordination (hip + knee + ankle)</li>
</ul><p><strong>Both answers A and B are valid</strong> depending on interpretation:</p><ul>
<li class=""><strong>A (Ankle first):</strong> Technically correct - ankle always tries first</li>
<li class=""><strong>B (Hip effective):</strong> Practically correct - 0.3m needs hip to recover</li>
</ul></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>C) Stepping strategy - Take step forward to reposition foot</summary><div><div class="collapsibleContent_i85q"><p>❌ <strong>Premature - Stepping is Last Resort</strong></p><p><strong>Stepping strategy:</strong></p><ul>
<li class=""><strong>When:</strong> Large perturbations (&gt;0.5m COM displacement)</li>
<li class=""><strong>Why last:</strong> Requires foot placement planning, higher risk</li>
</ul><p><strong>For 0.3m perturbation:</strong></p><ul>
<li class="">Hip strategy sufficient</li>
<li class="">No stepping needed yet</li>
</ul><p><strong>Stepping triggers:</strong></p><ul>
<li class="">COM velocity &gt; 0.8 m/s</li>
<li class="">COM displacement &gt; 0.5m</li>
<li class="">Ankle + hip strategies both saturated</li>
</ul></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>D) Arm swing - Wave arms to create counter-momentum</summary><div><div class="collapsibleContent_i85q"><p>❌ <strong>Supplementary, Not Primary</strong></p><p><strong>Arm swing role:</strong></p><ul>
<li class="">Provides <strong>auxiliary</strong> momentum</li>
<li class="">Helps <strong>fine-tune</strong> balance</li>
<li class=""><strong>Not sufficient</strong> alone for 0.3m perturbation</li>
</ul><p><strong>Primary recovery:</strong> Ankle → Hip → Stepping
<strong>Secondary:</strong> Arm swing (assists all three)</p></div></div></details>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="question-4-whole-body-control-formulation">Question 4: Whole-Body Control Formulation<a href="#question-4-whole-body-control-formulation" class="hash-link" aria-label="Direct link to Question 4: Whole-Body Control Formulation" title="Direct link to Question 4: Whole-Body Control Formulation" translate="no">​</a></h2>
<p><strong>In Quadratic Programming (QP) based whole-body control, what is being optimized?</strong></p>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>A) Minimize joint velocities subject to task constraints</summary><div><div class="collapsibleContent_i85q"><p>❌ <strong>Incomplete - Missing Torque Optimization</strong></p><p><strong>Problem:</strong> Joint velocity minimization alone doesn&#x27;t handle dynamics.</p><p><strong>Missing:</strong> Torque limits, contact forces, dynamics constraints.</p><p><strong>Better formulation:</strong> Minimize control effort (torques) while achieving tasks.</p></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>B) Minimize joint torques while satisfying task and contact constraints</summary><div><div class="collapsibleContent_i85q"><p>✅ <strong>Correct - Standard WBC Formulation!</strong></p><p><strong>Whole-body control QP structure:</strong></p><p><strong>Objective function (minimize):</strong></p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">min: ½ τᵀ W τ + ...</span><br></span></code></pre></div></div><p>Where:</p><ul>
<li class="">τ = joint torques (decision variables)</li>
<li class="">W = weight matrix (penalize high torques)</li>
</ul><p><strong>Equality constraints:</strong></p><ol>
<li class="">
<p><strong>Dynamics:</strong> M(q)q̈ + C(q,q̇) + G(q) = τ + Jᵀλ</p>
<ul>
<li class="">M = mass matrix</li>
<li class="">C = Coriolis/centrifugal</li>
<li class="">G = gravity</li>
<li class="">J = contact Jacobian</li>
<li class="">λ = contact forces</li>
</ul>
</li>
<li class="">
<p><strong>Task constraints:</strong> J_task · q̈ = ẍ_desired</p>
<ul>
<li class="">Example: &quot;Keep COM at height 0.9m&quot;</li>
<li class="">Example: &quot;Track foot trajectory&quot;</li>
</ul>
</li>
</ol><p><strong>Inequality constraints:</strong></p><ol>
<li class=""><strong>Torque limits:</strong> τ_min ≤ τ ≤ τ_max</li>
<li class=""><strong>Contact forces:</strong> Friction cone constraints</li>
<li class=""><strong>Joint limits:</strong> q_min ≤ q ≤ q_max</li>
</ol><p><strong>Full QP formulation:</strong></p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> cvxpy </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> cp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> numpy </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> np</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Decision variables</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">n_joints </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">12</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tau </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> cp</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Variable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">n_joints</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Joint torques</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">lambda_c </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> cp</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Variable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">6</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Contact forces (6D wrench)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Weights</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">W_torque </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> np</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">eye</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">n_joints</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.01</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">W_task </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1000.0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Objective: minimize torques, achieve task</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cost </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> cp</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">quad_form</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">tau</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> W_torque</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cost </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> W_task </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> cp</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">sum_squares</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">J_task @ tau </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> desired_acceleration</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Constraints</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">constraints </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Dynamics (equality)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    M @ qddot </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> tau </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> J_contact</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">T @ lambda_c </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> C </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> G</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Torque limits (inequality)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tau </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">gt</span><span class="token punctuation" style="color:#393A34">;</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> tau_min</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tau </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">lt</span><span class="token punctuation" style="color:#393A34">;</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> tau_max</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Friction cone (inequality)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    lambda_c</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">gt</span><span class="token punctuation" style="color:#393A34">;</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Normal force ≥ 0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cp</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">norm</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">lambda_c</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">lt</span><span class="token punctuation" style="color:#393A34">;</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> mu </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> lambda_c</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># |F_tangential| ≤ μ·F_normal</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Solve</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">problem </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> cp</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Problem</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cp</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Minimize</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cost</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> constraints</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">problem</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">solve</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">solver</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">cp</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">OSQP</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">optimal_torques </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> tau</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">value</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-interpolation string" style="color:#e3116c">f&quot;Optimal torques: </span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">optimal_torques</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">&quot;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div><p><strong>Why this formulation:</strong></p><ol>
<li class=""><strong>Minimize energy:</strong> Low torques → efficient walking</li>
<li class=""><strong>Safety:</strong> Torque limits prevent actuator damage</li>
<li class=""><strong>Stability:</strong> Contact constraints prevent slipping</li>
<li class=""><strong>Task achievement:</strong> Equality constraints ensure goals met</li>
</ol><p><strong>Real-world example (Atlas robot):</strong></p><ul>
<li class="">30 joints → 30 torque variables</li>
<li class="">4 contact points → 24 contact force variables</li>
<li class="">Task: Maintain upright posture + follow foot trajectory</li>
<li class="">Solved at 1000 Hz (1ms per QP solve)</li>
</ul></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>C) Maximize walking speed while maintaining balance</summary><div><div class="collapsibleContent_i85q"><p>❌ <strong>Wrong Objective</strong></p><p><strong>WBC objective:</strong> Energy minimization (low torques), not speed maximization.</p><p><strong>Speed control:</strong> Handled by higher-level gait planner, not WBC.</p><p><strong>WBC role:</strong> Execute planned gait efficiently, not plan it.</p></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>D) Find inverse kinematics solution for foot placement</summary><div><div class="collapsibleContent_i85q"><p>❌ <strong>Too Narrow - IK is Subset</strong></p><p><strong>IK (Inverse Kinematics):</strong></p><ul>
<li class="">Solves for joint angles given foot position</li>
<li class="">Purely kinematic (no forces/torques)</li>
</ul><p><strong>WBC (Whole-Body Control):</strong></p><ul>
<li class="">Solves for joint torques given tasks</li>
<li class="">Includes dynamics, contacts, torque limits</li>
<li class="">Superset of IK</li>
</ul><p><strong>IK is a constraint</strong> within WBC, not the objective.</p></div></div></details>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="question-5-gait-state-machine">Question 5: Gait State Machine<a href="#question-5-gait-state-machine" class="hash-link" aria-label="Direct link to Question 5: Gait State Machine" title="Direct link to Question 5: Gait State Machine" translate="no">​</a></h2>
<p><strong>A humanoid&#x27;s gait state machine has the following sequence: STAND → WALK_INIT → SINGLE_SUPPORT_R → DOUBLE_SUPPORT → SINGLE_SUPPORT_L → WALK_FINISH → STAND. During SINGLE_SUPPORT_R, the left foot sensor detects unexpected contact. What should happen?</strong></p>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>A) Ignore sensor - False positive, continue SINGLE_SUPPORT_R</summary><div><div class="collapsibleContent_i85q"><p>❌ <strong>Dangerous - Could Cause Fall</strong></p><p><strong>Problem:</strong> Unexpected contact could be:</p><ul>
<li class="">Obstacle collision</li>
<li class="">Early foot strike (stumble)</li>
<li class="">Terrain irregularity</li>
</ul><p><strong>Ignoring contact risks:</strong></p><ul>
<li class="">Incorrect force distribution</li>
<li class="">ZMP shift outside support polygon</li>
<li class="">Loss of balance</li>
</ul><p><strong>Never ignore unexpected sensor data!</strong></p></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>B) Immediately transition to DOUBLE_SUPPORT</summary><div><div class="collapsibleContent_i85q"><p>✅ <strong>Correct - Safety-First Response!</strong></p><p><strong>Why this is correct:</strong></p><p><strong>State machine fault handling:</strong></p><ol>
<li class=""><strong>Unexpected contact detected</strong> during SINGLE_SUPPORT_R</li>
<li class=""><strong>Implication:</strong> Both feet now on ground</li>
<li class=""><strong>Action:</strong> Transition to DOUBLE_SUPPORT state immediately</li>
<li class=""><strong>Benefit:</strong> Re-stabilize before continuing gait</li>
</ol><p><strong>Gait state machine with fault tolerance:</strong></p><p><strong>Implementation:</strong></p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">GaitStateMachine</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">__init__</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">state </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;STAND&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">unexpected_contact_threshold </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">50.0</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Newtons</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">update</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> left_foot_force</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> right_foot_force</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">state </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;SINGLE_SUPPORT_R&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic"># Expected: right foot has force, left foot has ~0 force</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> left_foot_force </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">gt</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">unexpected_contact_threshold</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-interpolation string" style="color:#e3116c">f&quot;WARNING: Unexpected left foot contact (</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">left_foot_force</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">:</span><span class="token string-interpolation interpolation format-spec">.1f</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">N)&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Transitioning to DOUBLE_SUPPORT for safety&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token comment" style="color:#999988;font-style:italic"># Emergency transition</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">state </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;DOUBLE_SUPPORT&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">recompute_zmp</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Update ZMP for two contacts</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">log_fault</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;unexpected_contact&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> time</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">time</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">else</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token comment" style="color:#999988;font-style:italic"># Normal single support</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">continue_swing_phase</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">recompute_zmp</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token triple-quoted-string string" style="color:#e3116c">&quot;&quot;&quot;Recompute ZMP for unexpected double support&quot;&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># Support polygon now includes both feet</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># Adjust COM trajectory to maintain stability</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">pass</span><br></span></code></pre></div></div><p><strong>Why safety-first:</strong></p><ul>
<li class="">False transition to DOUBLE_SUPPORT: Minor inefficiency (slower gait)</li>
<li class="">Missing true contact: Potential fall (catastrophic)</li>
</ul><p><strong>Risk-reward:</strong> Always choose safe option for unexpected events.</p></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>C) Trigger EMERGENCY_STOP, freeze all joints</summary><div><div class="collapsibleContent_i85q"><p>❌ <strong>Too Extreme</strong></p><p><strong>Emergency stop when:</strong></p><ul>
<li class="">Critical faults (actuator failure, loss of power)</li>
<li class="">Imminent danger (falling detected)</li>
<li class="">Multiple simultaneous faults</li>
</ul><p><strong>Unexpected contact:</strong></p><ul>
<li class="">Recoverable with DOUBLE_SUPPORT transition</li>
<li class="">No need for emergency stop (too drastic)</li>
</ul><p><strong>Principle:</strong> Minimal intervention - use gentlest correction that ensures safety.</p></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>D) Reverse to WALK_INIT and restart gait cycle</summary><div><div class="collapsibleContent_i85q"><p>❌ <strong>Inefficient and Unsafe</strong></p><p><strong>Problems:</strong></p><ol>
<li class=""><strong>Disrupts momentum:</strong> Would cause jerky motion</li>
<li class=""><strong>Slow recovery:</strong> Restart takes 2-3 seconds</li>
<li class=""><strong>Unsafe:</strong> During reversal, COM may shift unpredictably</li>
</ol><p><strong>Better:</strong> Adapt current gait (transition to DOUBLE_SUPPORT).</p><p><strong>Reserve restarts:</strong> For complete gait failures, not minor disturbances.</p></div></div></details>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="question-6-walking-speed-vs-stability">Question 6: Walking Speed vs Stability<a href="#question-6-walking-speed-vs-stability" class="hash-link" aria-label="Direct link to Question 6: Walking Speed vs Stability" title="Direct link to Question 6: Walking Speed vs Stability" translate="no">​</a></h2>
<p><strong>You&#x27;re tuning gait parameters for a humanoid. Increasing walking speed from 0.3 m/s to 0.8 m/s, which stability metric will WORSEN the most?</strong></p>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>A) Static stability margin (distance from COM to support polygon edge)</summary><div><div class="collapsibleContent_i85q"><p>❌ <strong>Static Stability Less Relevant at Higher Speeds</strong></p><p><strong>Static stability:</strong></p><ul>
<li class="">Relevant for slow walking (&lt;0.2 m/s)</li>
<li class="">Assumes zero velocity (quasi-static)</li>
</ul><p><strong>At 0.8 m/s:</strong></p><ul>
<li class="">Dynamics dominate (dynamic stability more important)</li>
<li class="">COM velocity and acceleration matter more than position</li>
</ul><p><strong>This metric doesn&#x27;t worsen much</strong> with speed (not the answer).</p></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>B) ZMP margin (safety distance from ZMP to support polygon edge)</summary><div><div class="collapsibleContent_i85q"><p>✅ <strong>Correct - ZMP Margin Degrades with Speed!</strong></p><p><strong>Why ZMP margin worsens at high speeds:</strong></p><p><strong>ZMP equation (simplified):</strong></p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ZMP = COM_projection - (COM_height / g) · COM_acceleration</span><br></span></code></pre></div></div><p>Where:</p><ul>
<li class="">g = 9.81 m/s² (gravity)</li>
<li class="">COM_acceleration ∝ velocity² (higher speed → higher acceleration)</li>
</ul><p><strong>Effect of speed increase (0.3 m/s → 0.8 m/s):</strong></p><p><strong>At 0.3 m/s (slow walking):</strong></p><ul>
<li class="">COM acceleration: ~0.5 m/s²</li>
<li class="">ZMP offset from COM: 0.9 / 9.81 · 0.5 ≈ 0.046m (4.6cm)</li>
<li class="">Support polygon: 24cm × 10cm</li>
<li class=""><strong>ZMP margin:</strong> ~7cm from edges (safe)</li>
</ul><p><strong>At 0.8 m/s (fast walking):</strong></p><ul>
<li class="">COM acceleration: ~3.5 m/s² (7× higher!)</li>
<li class="">ZMP offset from COM: 0.9 / 9.81 · 3.5 ≈ 0.32m (32cm)</li>
<li class="">Support polygon: Still 24cm × 10cm</li>
<li class=""><strong>ZMP margin:</strong> &lt;1cm from edges (unstable!)</li>
</ul><p><strong>ZMP margin degradation:</strong></p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">compute_zmp_margin</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">walking_speed</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> com_height</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">0.9</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Empirical: COM acceleration ≈ k · speed²</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    k </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5.5</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># acceleration scaling factor</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    com_accel </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> k </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> walking_speed</span><span class="token operator" style="color:#393A34">**</span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># ZMP offset from COM</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    zmp_offset </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">com_height </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">9.81</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> com_accel</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Support polygon (foot)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    foot_length </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.24</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># meters</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    foot_width </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.10</span><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic"># meters</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Worst-case margin (forward direction)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    margin </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">foot_length </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> zmp_offset</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> margin</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> zmp_offset</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Compare speeds</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">margin_slow</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> offset_slow </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> compute_zmp_margin</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0.3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">margin_fast</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> offset_fast </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> compute_zmp_margin</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0.8</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-interpolation string" style="color:#e3116c">f&quot;0.3 m/s: ZMP offset=</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">offset_slow</span><span class="token string-interpolation interpolation operator" style="color:#393A34">*</span><span class="token string-interpolation interpolation number" style="color:#36acaa">100</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">:</span><span class="token string-interpolation interpolation format-spec">.1f</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">cm, margin=</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">margin_slow</span><span class="token string-interpolation interpolation operator" style="color:#393A34">*</span><span class="token string-interpolation interpolation number" style="color:#36acaa">100</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">:</span><span class="token string-interpolation interpolation format-spec">.1f</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">cm&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-interpolation string" style="color:#e3116c">f&quot;0.8 m/s: ZMP offset=</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">offset_fast</span><span class="token string-interpolation interpolation operator" style="color:#393A34">*</span><span class="token string-interpolation interpolation number" style="color:#36acaa">100</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">:</span><span class="token string-interpolation interpolation format-spec">.1f</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">cm, margin=</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">margin_fast</span><span class="token string-interpolation interpolation operator" style="color:#393A34">*</span><span class="token string-interpolation interpolation number" style="color:#36acaa">100</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">:</span><span class="token string-interpolation interpolation format-spec">.1f</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">cm&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-interpolation string" style="color:#e3116c">f&quot;Margin degradation: </span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">(</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">(</span><span class="token string-interpolation interpolation">margin_slow </span><span class="token string-interpolation interpolation operator" style="color:#393A34">-</span><span class="token string-interpolation interpolation"> margin_fast</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">)</span><span class="token string-interpolation interpolation operator" style="color:#393A34">/</span><span class="token string-interpolation interpolation">margin_slow</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">)</span><span class="token string-interpolation interpolation operator" style="color:#393A34">*</span><span class="token string-interpolation interpolation number" style="color:#36acaa">100</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">:</span><span class="token string-interpolation interpolation format-spec">.1f</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">%&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Output:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 0.3 m/s: ZMP offset=4.5cm, margin=7.5cm</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 0.8 m/s: ZMP offset=32.0cm, margin=-20.0cm (UNSTABLE!)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Margin degradation: 367% (negative margin = outside support polygon)</span><br></span></code></pre></div></div><p><strong>Why this matters:</strong></p><ul>
<li class=""><strong>ZMP margin is critical</strong> for dynamic stability</li>
<li class=""><strong>Higher speeds</strong> → larger accelerations → ZMP moves toward polygon edges</li>
<li class=""><strong>Solution:</strong> Wider steps, faster step frequency, or speed limit</li>
</ul><p><strong>Real-world mitigation:</strong></p><ol>
<li class="">Increase step width (wider support polygon)</li>
<li class="">Reduce step length (lower peak accelerations)</li>
<li class="">Increase step frequency (shorter time at peak acceleration)</li>
<li class="">Speed governor (limit to 0.6 m/s if ZMP margin &lt; 3cm)</li>
</ol></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>C) Foot clearance height during swing phase</summary><div><div class="collapsibleContent_i85q"><p>❌ <strong>Foot Clearance Actually Improves</strong></p><p><strong>At higher speeds:</strong></p><ul>
<li class="">Faster swing velocity → higher foot lift (natural dynamics)</li>
<li class="">Less risk of scuffing ground</li>
</ul><p><strong>Foot clearance is not a stability metric</strong> (it&#x27;s a collision avoidance metric).</p></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>D) Double support duration percentage</summary><div><div class="collapsibleContent_i85q"><p>✅ <strong>Also Worsens (But Secondary Effect)</strong></p><p><strong>Double support vs speed:</strong></p><ul>
<li class="">0.3 m/s: 25% double support (stable transitions)</li>
<li class="">0.8 m/s: 10% double support (brief transitions)</li>
</ul><p><strong>Effect:</strong></p><ul>
<li class=""><strong>Less time</strong> for weight transfer</li>
<li class=""><strong>Higher risk</strong> of ZMP discontinuity</li>
<li class="">But <strong>ZMP margin</strong> worsens more dramatically</li>
</ul><p><strong>Both B and D worsen, but B (ZMP margin) is the primary concern.</strong></p></div></div></details>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="question-7-debugging-tipping-failures">Question 7: Debugging Tipping Failures<a href="#question-7-debugging-tipping-failures" class="hash-link" aria-label="Direct link to Question 7: Debugging Tipping Failures" title="Direct link to Question 7: Debugging Tipping Failures" translate="no">​</a></h2>
<p><strong>Your humanoid tips forward and falls during walking. Sensor logs show ZMP moved outside the support polygon 0.2 seconds before the fall. What&#x27;s the MOST LIKELY root cause?</strong></p>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>A) Gait planner generated trajectory with COM acceleration exceeding limits</summary><div><div class="collapsibleContent_i85q"><p>✅ <strong>Correct - Most Common Cause!</strong></p><p><strong>Why gait planner is likely culprit:</strong></p><p><strong>Failure sequence:</strong></p><ol>
<li class=""><strong>Gait planner</strong> generates COM trajectory</li>
<li class=""><strong>COM acceleration</strong> exceeds what support polygon can handle</li>
<li class=""><strong>ZMP</strong> shifts outside polygon (0.2s before fall)</li>
<li class=""><strong>No recovery</strong> possible (exceeded ZMP limits)</li>
<li class=""><strong>Tipping</strong> occurs</li>
</ol><p><strong>Root cause analysis:</strong></p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">GaitPlanner</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">__init__</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">max_com_accel </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2.5</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># m/s² (safe limit for this robot)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">generate_com_trajectory</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> target_speed</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># BUG: Not checking acceleration limits!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        com_traj </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">compute_trajectory</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">target_speed</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># Should validate:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        actual_accel </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> np</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">diff</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">np</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">diff</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">com_traj</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">positions</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">dt</span><span class="token operator" style="color:#393A34">**</span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        max_accel </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> np</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">max</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">np</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">abs</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">actual_accel</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> max_accel </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">gt</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">max_com_accel</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-interpolation string" style="color:#e3116c">f&quot;ERROR: COM accel </span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">max_accel</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">:</span><span class="token string-interpolation interpolation format-spec">.2f</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c"> exceeds limit </span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">self</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">.</span><span class="token string-interpolation interpolation">max_com_accel</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic"># Should replan with lower accelerations</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> com_traj</span><br></span></code></pre></div></div><p><strong>Common gait planner bugs:</strong></p><ol>
<li class=""><strong>Step length too long</strong> → high acceleration at push-off</li>
<li class=""><strong>Step time too short</strong> → insufficient time for smooth acceleration</li>
<li class=""><strong>No ZMP margin checking</strong> → planned ZMP at polygon boundary</li>
<li class=""><strong>Ignored actuator limits</strong> → commanded torques infeasible</li>
</ol><p><strong>Fix:</strong></p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">safe_gait_planning</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> target_speed</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Compute ZMP margin for planned trajectory</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    zmp_margin </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">compute_zmp_margin</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">target_speed</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> zmp_margin </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">lt</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.03</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 3cm minimum margin</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-interpolation string" style="color:#e3116c">f&quot;WARNING: ZMP margin </span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">zmp_margin</span><span class="token string-interpolation interpolation operator" style="color:#393A34">*</span><span class="token string-interpolation interpolation number" style="color:#36acaa">100</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">:</span><span class="token string-interpolation interpolation format-spec">.1f</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">cm too small&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># Reduce speed or widen steps</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        adjusted_speed </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">compute_safe_speed</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">min_margin</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">0.03</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">generate_com_trajectory</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">adjusted_speed</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">generate_com_trajectory</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">target_speed</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div><p><strong>Diagnostic question:</strong> Was the planned COM acceleration within safe limits?</p></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>B) Balance controller gains (Kp, Kd) tuned too low</summary><div><div class="collapsibleContent_i85q"><p>❌ <strong>Would Cause Slow Drift, Not Sudden Tipping</strong></p><p><strong>Low controller gains:</strong></p><ul>
<li class=""><strong>Effect:</strong> Sluggish response to disturbances</li>
<li class=""><strong>Symptom:</strong> Gradual COM drift (over 2-5 seconds)</li>
<li class=""><strong>Not consistent with:</strong> Sudden ZMP violation 0.2s before fall</li>
</ul><p><strong>Sudden tipping (0.2s):</strong> Indicates excessive planned acceleration, not poor tracking.</p><p><strong>Low gains symptom:</strong> COM tracking error &gt; 5cm, slow oscillations.</p></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>C) Foot placement error (actual vs planned foot position differs by 2cm)</summary><div><div class="collapsibleContent_i85q"><p>❌ <strong>2cm Error is Acceptable</strong></p><p><strong>Foot placement tolerances:</strong></p><ul>
<li class=""><strong>Acceptable:</strong> ±2cm (normal sensor/actuator uncertainty)</li>
<li class=""><strong>Problematic:</strong> &gt;5cm (causes ZMP shift)</li>
</ul><p><strong>2cm error impact:</strong></p><ul>
<li class="">ZMP shift: ~1-1.5cm</li>
<li class="">Support polygon: 24cm × 10cm</li>
<li class=""><strong>Margin lost:</strong> 1.5cm (reduces safety but doesn&#x27;t cause tipping)</li>
</ul><p><strong>This would cause minor instability, not catastrophic tipping.</strong></p></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>D) IMU drift causing incorrect COM estimation</summary><div><div class="collapsibleContent_i85q"><p>❌ <strong>IMU Drift is Gradual</strong></p><p><strong>IMU drift characteristics:</strong></p><ul>
<li class=""><strong>Rate:</strong> 0.5-2°/minute (slow)</li>
<li class=""><strong>Effect:</strong> Gradual COM estimation error</li>
<li class=""><strong>Timescale:</strong> Minutes, not seconds</li>
</ul><p><strong>Sudden tipping (0.2s before fall):</strong></p><ul>
<li class="">Indicates rapid event (excessive acceleration)</li>
<li class="">Not consistent with slow IMU drift</li>
</ul><p><strong>IMU drift symptoms:</strong> Robot leans slightly over 30+ seconds, not sudden tipping.</p></div></div></details>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="question-8-whole-body-control-vs-hierarchical-control">Question 8: Whole-Body Control vs Hierarchical Control<a href="#question-8-whole-body-control-vs-hierarchical-control" class="hash-link" aria-label="Direct link to Question 8: Whole-Body Control vs Hierarchical Control" title="Direct link to Question 8: Whole-Body Control vs Hierarchical Control" translate="no">​</a></h2>
<p><strong>What is the key advantage of whole-body QP control over hierarchical (cascaded) control?</strong></p>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>A) Whole-body control is faster (lower computational cost)</summary><div><div class="collapsibleContent_i85q"><p>❌ <strong>Opposite - WBC is Slower</strong></p><p><strong>Computational cost comparison:</strong></p><ul>
<li class="">
<p><strong>Hierarchical control:</strong> O(n) (n = number of joints)</p>
<ul>
<li class="">Separate IK, then torque control</li>
<li class="">Each layer independent</li>
</ul>
</li>
<li class="">
<p><strong>Whole-body QP:</strong> O(n³) (solve QP)</p>
<ul>
<li class="">Joint optimization of all constraints</li>
<li class="">Requires QP solver (OSQP, qpOASES)</li>
</ul>
</li>
</ul><p><strong>WBC is slower</strong> but more optimal (trade-off).</p></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>B) Whole-body control handles conflicting constraints optimally</summary><div><div class="collapsibleContent_i85q"><p>✅ <strong>Correct - Key Advantage!</strong></p><p><strong>Whole-body QP handles constraint conflicts:</strong></p><p><strong>Example scenario:</strong></p><ol>
<li class=""><strong>Task 1:</strong> Keep COM at 0.9m height (high priority)</li>
<li class=""><strong>Task 2:</strong> Reach hand to target position (medium priority)</li>
<li class=""><strong>Constraint:</strong> Joint torque limits (hard constraint)</li>
</ol><p><strong>Hierarchical control problem:</strong></p><ul>
<li class="">Solves tasks sequentially (priority order)</li>
<li class="">Task 1 solution may make Task 2 infeasible</li>
<li class="">No mechanism to trade off between tasks</li>
</ul><p><strong>Hierarchical failure case:</strong></p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Hierarchical approach</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">hierarchical_control</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">com_task</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> hand_task</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> torque_limits</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Step 1: Solve for COM (highest priority)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    torques_com </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> solve_ik</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">com_task</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Step 2: Solve for hand (use remaining DOF)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    remaining_dof </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> compute_null_space</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">torques_com</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    torques_hand </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> solve_ik_in_nullspace</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">hand_task</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> remaining_dof</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Step 3: Check torque limits</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    total_torques </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> torques_com </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> torques_hand</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> np</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">any</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">total_torques </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">gt</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> torque_limits</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># PROBLEM: Can&#x27;t satisfy both tasks + torque limits!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># Hierarchical control has no mechanism to trade off</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># Must abandon Task 2 entirely</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> torques_com  </span><span class="token comment" style="color:#999988;font-style:italic"># Only COM task achieved</span><br></span></code></pre></div></div><p><strong>Whole-body QP solution:</strong></p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> cvxpy </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> cp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">whole_body_qp</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">com_task</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> hand_task</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> torque_limits</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Decision variables</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tau </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> cp</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Variable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">n_joints</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Weights (task priorities)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    w_com </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1000.0</span><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic"># High priority</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    w_hand </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10.0</span><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Medium priority</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    w_effort </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.01</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Low torque effort</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Objective: weighted sum of all tasks</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cost </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> w_com </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> cp</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">sum_squares</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">J_com @ tau </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> com_desired</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cost </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> w_hand </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> cp</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">sum_squares</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">J_hand @ tau </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> hand_desired</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cost </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> w_effort </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> cp</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">sum_squares</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">tau</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Constraints</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    constraints </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        tau </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">gt</span><span class="token punctuation" style="color:#393A34">;</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">torque_limits</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        tau </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">lt</span><span class="token punctuation" style="color:#393A34">;</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> torque_limits</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Solve</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    problem </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> cp</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Problem</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cp</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Minimize</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cost</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> constraints</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    problem</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">solve</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Result: Optimal trade-off between com_task and hand_task</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Both tasks partially satisfied within torque limits</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> tau</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">value</span><br></span></code></pre></div></div><p><strong>WBC advantages:</strong></p><ol>
<li class=""><strong>Optimal trade-offs:</strong> Finds best compromise between conflicting tasks</li>
<li class=""><strong>Respects all constraints:</strong> Torque limits, friction cones, joint limits</li>
<li class=""><strong>Smooth behavior:</strong> No sudden task abandonment</li>
<li class=""><strong>Predictable:</strong> Weighted priorities clear in formulation</li>
</ol><p><strong>Real-world example (Atlas robot reaching while balancing):</strong></p><ul>
<li class=""><strong>Hierarchical:</strong> Either balance perfectly OR reach target (can&#x27;t do both if conflicting)</li>
<li class=""><strong>WBC:</strong> Balance 95% + reach 80% (optimal compromise)</li>
</ul><p><strong>When WBC matters most:</strong></p><ul>
<li class="">Tight torque limits (underactuated systems)</li>
<li class="">Conflicting high-priority tasks</li>
<li class="">Complex contact scenarios (multi-contact manipulation)</li>
</ul></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>C) Whole-body control doesn&#x27;t require a dynamics model</summary><div><div class="collapsibleContent_i85q"><p>❌ <strong>Incorrect - WBC Requires Dynamics</strong></p><p><strong>WBC needs:</strong></p><ul>
<li class="">Mass matrix M(q)</li>
<li class="">Coriolis/centrifugal C(q, q̇)</li>
<li class="">Gravity vector G(q)</li>
<li class="">Contact Jacobians J</li>
</ul><p><strong>Hierarchical control:</strong></p><ul>
<li class="">Also requires dynamics (for torque computation)</li>
</ul><p><strong>Both need dynamics models</strong> - no advantage for WBC here.</p></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>D) Whole-body control automatically generates gait patterns</summary><div><div class="collapsibleContent_i85q"><p>❌ <strong>Incorrect - WBC Executes, Doesn&#x27;t Plan</strong></p><p><strong>WBC role:</strong></p><ul>
<li class=""><strong>Executes</strong> given tasks (COM trajectory, foot trajectory)</li>
<li class=""><strong>Computes</strong> joint torques to achieve tasks</li>
</ul><p><strong>Gait planning:</strong></p><ul>
<li class="">Separate module (gait planner)</li>
<li class="">Generates COM/foot trajectories</li>
<li class="">Feeds into WBC for execution</li>
</ul><p><strong>WBC does not plan gaits</strong> - it optimally executes planned gaits.</p></div></div></details>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="question-9-handling-uneven-terrain">Question 9: Handling Uneven Terrain<a href="#question-9-handling-uneven-terrain" class="hash-link" aria-label="Direct link to Question 9: Handling Uneven Terrain" title="Direct link to Question 9: Handling Uneven Terrain" translate="no">​</a></h2>
<p><strong>Your humanoid must walk on terrain with ±2cm height variations. Which modification is MOST critical?</strong></p>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>A) Increase foot force sensor resolution to detect 2cm height changes</summary><div><div class="collapsibleContent_i85q"><p>❌ <strong>Sensors Detect, Don&#x27;t Adapt</strong></p><p><strong>Force sensors:</strong></p><ul>
<li class="">Detect contact and forces</li>
<li class="">Don&#x27;t directly measure height variations</li>
</ul><p><strong>Need:</strong> Active terrain adaptation (not just sensing).</p><p><strong>Sensing is necessary but not sufficient.</strong></p></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>B) Implement compliant foot contacts with adaptive ankle control</summary><div><div class="collapsibleContent_i85q"><p>✅ <strong>Correct - Essential for Uneven Terrain!</strong></p><p><strong>Why compliant contacts are critical:</strong></p><p><strong>Rigid foot problem on uneven terrain:</strong></p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Flat terrain: Full foot contact (stable)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ████████</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">±2cm variation: Partial contact (unstable)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ████</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ----  ----  (rocks)</span><br></span></code></pre></div></div><p><strong>Compliant foot solution:</strong></p><ol>
<li class=""><strong>Passive compliance:</strong> Soft foot pad deforms to terrain</li>
<li class=""><strong>Active compliance:</strong> Ankle control adapts to maintain full contact</li>
<li class=""><strong>Force distribution:</strong> Even pressure across foot surface</li>
</ol><p><strong>Implementation:</strong></p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">CompliantFootControl</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">__init__</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># Impedance control parameters</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ankle_stiffness </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">300.0</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># N·m/rad (softer for compliance)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ankle_damping </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30.0</span><span class="token plain">     </span><span class="token comment" style="color:#999988;font-style:italic"># N·m·s/rad</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># Target: even force distribution across foot</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">target_force </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">300.0</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># N (half body weight)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">force_tolerance </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">50.0</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># N</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">update</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> foot_forces</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token triple-quoted-string string" style="color:#e3116c">&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        foot_forces: [heel_force, toe_force] (from 2 sensors)</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        &quot;&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># Measure force imbalance</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        force_diff </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> foot_forces</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> foot_forces</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># toe - heel</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token builtin">abs</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">force_diff</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">gt</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">force_tolerance</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic"># Terrain is uneven - adjust ankle to redistribute force</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> force_diff </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">gt</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token comment" style="color:#999988;font-style:italic"># Toe has more force → terrain slopes down at heel</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token comment" style="color:#999988;font-style:italic"># Plantarflex ankle (point toe down) to level foot</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                desired_ankle_torque </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ankle_stiffness </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.05</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># ~3° adjustment</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">else</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token comment" style="color:#999988;font-style:italic"># Heel has more force → terrain slopes down at toe</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token comment" style="color:#999988;font-style:italic"># Dorsiflex ankle (point toe up)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                desired_ankle_torque </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ankle_stiffness </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.05</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> desired_ankle_torque</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">else</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic"># Force balanced - maintain current ankle position</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Terrain adaptation in action</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">controller </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> CompliantFootControl</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Scenario: Step on 2cm rock under toe</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">foot_forces </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">250.0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">400.0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># [heel, toe] in Newtons</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ankle_torque </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> controller</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">update</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">foot_forces</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-interpolation string" style="color:#e3116c">f&quot;Ankle adaptation torque: </span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">ankle_torque</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">:</span><span class="token string-interpolation interpolation format-spec">.1f</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c"> N·m&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Output: Ankle adaptation torque: -15.0 N·m (plantarflex to level foot)</span><br></span></code></pre></div></div><p><strong>Why this works:</strong></p><ol>
<li class=""><strong>Detects unevenness:</strong> Force imbalance between heel/toe</li>
<li class=""><strong>Adapts ankle:</strong> Adjusts angle to redistribute forces</li>
<li class=""><strong>Maintains stability:</strong> Full foot contact despite ±2cm variations</li>
<li class=""><strong>Smooth walking:</strong> No need to slow down or stop</li>
</ol><p><strong>Alternative: Passive compliance (rubber foot pad)</strong></p><ul>
<li class="">Absorbs ±1-2cm variations</li>
<li class="">No active control needed</li>
<li class="">Trade-off: Less precise force control</li>
</ul><p><strong>Best practice:</strong> Combine passive (soft pad) + active (ankle control) compliance.</p></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>C) Reduce walking speed from 0.5 m/s to 0.2 m/s</summary><div><div class="collapsibleContent_i85q"><p>✅ <strong>Helps but Not Sufficient Alone</strong></p><p><strong>Slower walking:</strong></p><ul>
<li class=""><strong>Pros:</strong> More time to react, lower impact forces</li>
<li class=""><strong>Cons:</strong> Doesn&#x27;t solve root problem (rigid foot on uneven terrain)</li>
</ul><p><strong>Still need compliant contacts</strong> even at 0.2 m/s.</p><p><strong>Speed reduction is supplementary, not primary solution.</strong></p></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>D) Add vision-based terrain mapping to predict height changes</summary><div><div class="collapsibleContent_i85q"><p>✅ <strong>Also Important (Complementary)</strong></p><p><strong>Vision-based terrain mapping:</strong></p><ul>
<li class=""><strong>Benefit:</strong> Predict height changes before foot contact</li>
<li class=""><strong>Enables:</strong> Proactive foot placement adjustment</li>
<li class=""><strong>Limitation:</strong> Doesn&#x27;t replace need for compliant contact (sensor errors, occlusions)</li>
</ul><p><strong>Best system: Vision (predict) + Compliance (react)</strong></p><p><strong>But question asks &quot;MOST critical&quot;:</strong></p><ul>
<li class=""><strong>Compliance (B):</strong> Necessary for ANY uneven terrain walking</li>
<li class=""><strong>Vision (D):</strong> Improves performance but not strictly required</li>
</ul><p><strong>Answer B is most critical</strong> (compliance must happen at foot-ground interface).</p></div></div></details>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="question-10-locomotion-state-machine-edge-case">Question 10: Locomotion State Machine Edge Case<a href="#question-10-locomotion-state-machine-edge-case" class="hash-link" aria-label="Direct link to Question 10: Locomotion State Machine Edge Case" title="Direct link to Question 10: Locomotion State Machine Edge Case" translate="no">​</a></h2>
<p><strong>Your gait state machine transitions: STAND → WALK_INIT → SINGLE_SUPPORT_R → ... What&#x27;s the purpose of the WALK_INIT state?</strong></p>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>A) Wait for user confirmation before walking</summary><div><div class="collapsibleContent_i85q"><p>❌ <strong>Not an Automatic State Machine Concern</strong></p><p><strong>User confirmation:</strong></p><ul>
<li class="">Handled by higher-level behavior planner</li>
<li class="">Not part of low-level gait state machine</li>
</ul><p><strong>WALK_INIT is automatic</strong> (no user interaction).</p></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>B) Shift COM to right foot before left foot lifts (prepare for single support)</summary><div><div class="collapsibleContent_i85q"><p>✅ <strong>Correct - Critical Preparation Phase!</strong></p><p><strong>Purpose of WALK_INIT:</strong></p><p><strong>Why you can&#x27;t go directly from STAND to SINGLE_SUPPORT_R:</strong></p><ol>
<li class=""><strong>STAND state:</strong> COM centered between both feet (x = 0)</li>
<li class=""><strong>SINGLE_SUPPORT_R:</strong> COM must be over right foot (x = 0.10m)</li>
<li class=""><strong>Problem:</strong> Can&#x27;t lift left foot while COM is centered (would fall left)</li>
</ol><p><strong>WALK_INIT phase:</strong></p><ul>
<li class=""><strong>Duration:</strong> 0.5-1.0 seconds</li>
<li class=""><strong>Action:</strong> Shift COM from center to right foot</li>
<li class=""><strong>Result:</strong> Safe to lift left foot (COM supported by right foot)</li>
</ul><p><strong>State sequence:</strong></p><p><strong>Implementation:</strong></p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">WalkInitState</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">__init__</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">duration </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.8</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># seconds</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">start_time </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">None</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">enter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token triple-quoted-string string" style="color:#e3116c">&quot;&quot;&quot;Called when transitioning to WALK_INIT&quot;&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">start_time </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> time</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">time</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># Plan COM shift trajectory</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">com_trajectory </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">plan_com_shift</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            start_pos</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0.0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.9</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># Center (STAND)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            end_pos</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0.10</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.9</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">       </span><span class="token comment" style="color:#999988;font-style:italic"># Right foot (SINGLE_SUPPORT_R)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            duration</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">duration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">update</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token triple-quoted-string string" style="color:#e3116c">&quot;&quot;&quot;Called every control cycle during WALK_INIT&quot;&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        elapsed </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> time</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">time</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">start_time</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># Track COM trajectory</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        desired_com </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">com_trajectory</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">sample</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">elapsed</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">com_controller</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">track</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">desired_com</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># Check if shift complete</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> elapsed </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">gt</span><span class="token punctuation" style="color:#393A34">;</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">duration</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            current_com </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">state_estimator</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get_com</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> np</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">linalg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">norm</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">current_com </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0.10</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.9</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">lt</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.02</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token comment" style="color:#999988;font-style:italic"># COM successfully over right foot</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;WALK_INIT complete - safe to lift left foot&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;SINGLE_SUPPORT_R&quot;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Transition</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">else</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token comment" style="color:#999988;font-style:italic"># COM shift failed - abort walk</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;WARNING: COM shift incomplete, aborting walk&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;STAND&quot;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Return to safe state</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;WALK_INIT&quot;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Stay in current state</span><br></span></code></pre></div></div><p><strong>Why this matters:</strong></p><ul>
<li class=""><strong>Prevents falls:</strong> Can&#x27;t lift foot while COM unsupported</li>
<li class=""><strong>Smooth transition:</strong> Gradual COM shift (not jerky)</li>
<li class=""><strong>Robust:</strong> Checks COM position before allowing single support</li>
</ul><p><strong>Typical timing:</strong></p><ul>
<li class="">STAND: Indefinite (until walk command)</li>
<li class="">WALK_INIT: 0.5-1.0s (COM shift)</li>
<li class="">SINGLE_SUPPORT: 0.4-0.6s (swing phase)</li>
<li class="">DOUBLE_SUPPORT: 0.1-0.2s (weight transfer)</li>
</ul><p><strong>Symmetry:</strong> WALK_FINISH does the reverse (shift COM back to center before STAND).</p></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>C) Calibrate foot force sensors</summary><div><div class="collapsibleContent_i85q"><p>❌ <strong>Calibration is Offline Process</strong></p><p><strong>Sensor calibration:</strong></p><ul>
<li class="">Done during robot initialization (before operation)</li>
<li class="">Not part of runtime gait state machine</li>
</ul><p><strong>WALK_INIT is a gait preparation state,</strong> not a calibration state.</p></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>D) Generate foot trajectory for entire walk sequence</summary><div><div class="collapsibleContent_i85q"><p>❌ <strong>Planning Happens Before State Machine</strong></p><p><strong>Foot trajectory planning:</strong></p><ul>
<li class="">Done by gait planner (before state machine starts)</li>
<li class="">Not during WALK_INIT state</li>
</ul><p><strong>WALK_INIT executes</strong> pre-planned COM shift, doesn&#x27;t plan trajectories.</p></div></div></details>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="score-interpretation">Score Interpretation<a href="#score-interpretation" class="hash-link" aria-label="Direct link to Score Interpretation" title="Direct link to Score Interpretation" translate="no">​</a></h2>
<p><strong>Calculate your score:</strong></p>
<ul>
<li class="">9-10/10 correct: <strong>Expert</strong> - Ready for advanced locomotion research</li>
<li class="">7-8/10 correct: <strong>Proficient</strong> - Strong understanding, ready for implementation</li>
<li class="">5-6/10 correct: <strong>Developing</strong> - Review key locomotion concepts</li>
<li class="">0-4/10 correct: <strong>Needs Review</strong> - Re-read Chapter 08</li>
</ul>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="key-takeaways">Key Takeaways<a href="#key-takeaways" class="hash-link" aria-label="Direct link to Key Takeaways" title="Direct link to Key Takeaways" translate="no">​</a></h2>
<p>If you struggled with specific topics, review these sections:</p>
<table><thead><tr><th>Question</th><th>Topic</th><th>Review Section</th></tr></thead><tbody><tr><td>Q1</td><td>ZMP Stability</td><td>Zero Moment Point (ZMP) Theory</td></tr><tr><td>Q2</td><td>Gait Phases</td><td>Walking Cycle Phases</td></tr><tr><td>Q3</td><td>Balance Recovery</td><td>Balance Control Algorithms</td></tr><tr><td>Q4</td><td>QP Formulation</td><td>Whole-Body Control</td></tr><tr><td>Q5</td><td>State Machines</td><td>Gait State Machine</td></tr><tr><td>Q6</td><td>Speed Trade-offs</td><td>Performance Optimization</td></tr><tr><td>Q7</td><td>Debugging</td><td>Debugging Locomotion Failures</td></tr><tr><td>Q8</td><td>Control Architectures</td><td>Whole-Body Control</td></tr><tr><td>Q9</td><td>Terrain Adaptation</td><td>Locomotion on Uneven Terrain</td></tr><tr><td>Q10</td><td>State Transitions</td><td>Gait State Machine</td></tr></tbody></table>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="next-steps">Next Steps<a href="#next-steps" class="hash-link" aria-label="Direct link to Next Steps" title="Direct link to Next Steps" translate="no">​</a></h2>
<p>After completing this quiz:</p>
<ol>
<li class=""><strong>Score &gt;= 80%:</strong> Proceed to Chapter 09 (Dexterous Manipulation)</li>
<li class=""><strong>Score &lt; 80%:</strong> Review Chapter 08 sections and retry quiz</li>
<li class=""><strong>Hands-on:</strong> Implement gait controller in Isaac Sim</li>
<li class=""><strong>Advanced:</strong> Test balance recovery with push perturbations</li>
</ol>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Practice Challenge</div><div class="admonitionContent_BuS1"><p><strong>Build complete locomotion system:</strong></p><ol>
<li class="">Implement ZMP-based gait planner (step length 0.4m, 0.5 m/s speed)</li>
<li class="">Create balance controller with ankle + hip strategies</li>
<li class="">Design gait state machine with fault handling</li>
<li class="">Test walking on flat terrain in Isaac Sim</li>
<li class="">Apply 150N forward push - verify recovery within 1.5s</li>
<li class="">Measure success rate over 20 trials (&gt;90% target)</li>
</ol><p><strong>Time budget:</strong> 4-6 hours
<strong>Difficulty:</strong> Advanced
<strong>Prerequisites:</strong> Chapter 04 (URDF), Chapter 05 (Simulation), Isaac Sim</p></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href="https://github.com/MuhammadWaqasrafiq/HumanoidRoboticsBook/tree/main/docs/bipedal-locomotion/quiz.mdx" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#question-1-zmp-stability-criterion" class="table-of-contents__link toc-highlight">Question 1: ZMP Stability Criterion</a></li><li><a href="#question-2-gait-cycle-phases" class="table-of-contents__link toc-highlight">Question 2: Gait Cycle Phases</a></li><li><a href="#question-3-balance-recovery-strategies" class="table-of-contents__link toc-highlight">Question 3: Balance Recovery Strategies</a></li><li><a href="#question-4-whole-body-control-formulation" class="table-of-contents__link toc-highlight">Question 4: Whole-Body Control Formulation</a></li><li><a href="#question-5-gait-state-machine" class="table-of-contents__link toc-highlight">Question 5: Gait State Machine</a></li><li><a href="#question-6-walking-speed-vs-stability" class="table-of-contents__link toc-highlight">Question 6: Walking Speed vs Stability</a></li><li><a href="#question-7-debugging-tipping-failures" class="table-of-contents__link toc-highlight">Question 7: Debugging Tipping Failures</a></li><li><a href="#question-8-whole-body-control-vs-hierarchical-control" class="table-of-contents__link toc-highlight">Question 8: Whole-Body Control vs Hierarchical Control</a></li><li><a href="#question-9-handling-uneven-terrain" class="table-of-contents__link toc-highlight">Question 9: Handling Uneven Terrain</a></li><li><a href="#question-10-locomotion-state-machine-edge-case" class="table-of-contents__link toc-highlight">Question 10: Locomotion State Machine Edge Case</a></li><li><a href="#score-interpretation" class="table-of-contents__link toc-highlight">Score Interpretation</a></li><li><a href="#key-takeaways" class="table-of-contents__link toc-highlight">Key Takeaways</a></li><li><a href="#next-steps" class="table-of-contents__link toc-highlight">Next Steps</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Learn</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/HumanoidRoboticsBook/docs/intro">Introduction</a></li><li class="footer__item"><a class="footer__link-item" href="/HumanoidRoboticsBook/docs/why-physical-ai">Why Physical AI</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Resources</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/MuhammadWaqasrafiq/HumanoidRoboticsBook" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub Repo<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://github.com/MuhammadWaqasrafiq/HumanoidRoboticsBook/tree/main/code-examples" target="_blank" rel="noopener noreferrer" class="footer__link-item">Code Samples<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Connect</div><ul class="footer__items clean-list"><li class="footer__item">
<div style="display:flex; gap:1.5rem; margin-bottom:1rem;">
  <a href="https://github.com/MuhammadWaqasrafiq/HumanoidRoboticsBook" target="_blank" rel="noopener noreferrer" aria-label="GitHub" style="color:#fff;font-size:1.6rem;">
    <i class="fa-brands fa-github"></i>
  </a>
  <a href="https://linkedin.com/in/MuhammadWaqasrafiq" target="_blank" rel="noopener noreferrer" aria-label="LinkedIn" style="color:#fff;font-size:1.6rem;">
    <i class="fa-brands fa-linkedin"></i>
  </a>
  <a href="https://wa.me/923463033195" target="_blank" rel="noopener noreferrer" aria-label="WhatsApp" style="color:#fff;font-size:1.6rem;">
    <i class="fa-brands fa-whatsapp"></i>
  </a>
  <a href="https://www.youtube.com/watch?v=dZTfXiPSZyE" target="_blank" rel="noopener noreferrer" aria-label="YouTube" style="color:#fff;font-size:1.6rem;">
    <i class="fa-brands fa-youtube"></i>
  </a>
</div>
              </li><li class="footer__item"><a href="https://github.com/MuhammadWaqasrafiq/HumanoidRoboticsBook/blob/main/LICENSE" target="_blank" rel="noopener noreferrer" class="footer__link-item">MIT License<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">© 2025 Embodied AI • Muhammad Waqas Rafiq • MIT & CC-BY-4.0</div></div></div></footer></div>
</body>
</html>