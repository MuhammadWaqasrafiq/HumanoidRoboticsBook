"use strict";(self.webpackChunkphysical_ai_humanoid_robotics_book=self.webpackChunkphysical_ai_humanoid_robotics_book||[]).push([[7848],{496:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>o,contentTitle:()=>t,default:()=>h,frontMatter:()=>l,metadata:()=>a,toc:()=>c});const a=JSON.parse('{"id":"ros2-fundamentals/parameters-launch","title":"Section 3 - Parameters & Launch Files","description":"Configuring ROS 2 nodes with parameters and orchestrating multi-node systems with launch files","source":"@site/docs/ros2-fundamentals/parameters-launch.mdx","sourceDirName":"ros2-fundamentals","slug":"/ros2-fundamentals/parameters-launch","permalink":"/HumanoidRoboticsBook/docs/ros2-fundamentals/parameters-launch","draft":false,"unlisted":false,"editUrl":"https://github.com/MuhammadWaqasrafiq/HumanoidRoboticsBook/tree/main/docs/ros2-fundamentals/parameters-launch.mdx","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"id":"parameters-launch","title":"Section 3 - Parameters & Launch Files","sidebar_position":3,"description":"Configuring ROS 2 nodes with parameters and orchestrating multi-node systems with launch files","keywords":["ros2-parameters","ros2-launch","configuration","yaml","python-launch"]},"sidebar":"tutorialSidebar","previous":{"title":"Services & Actions","permalink":"/HumanoidRoboticsBook/docs/ros2-fundamentals/services-actions"},"next":{"title":"Debugging Tools","permalink":"/HumanoidRoboticsBook/docs/ros2-fundamentals/debugging-tools"}}');var s=r(4848),i=r(8453);const l={id:"parameters-launch",title:"Section 3 - Parameters & Launch Files",sidebar_position:3,description:"Configuring ROS 2 nodes with parameters and orchestrating multi-node systems with launch files",keywords:["ros2-parameters","ros2-launch","configuration","yaml","python-launch"]},t="Section 3: Parameters & Launch Files",o={},c=[{value:"Introduction",id:"introduction",level:2},{value:"What are Parameters?",id:"what-are-parameters",level:2},{value:"Parameter Types",id:"parameter-types",level:3},{value:"Node with Parameters Example",id:"node-with-parameters-example",level:2},{value:"Parameter Introspection with CLI",id:"parameter-introspection-with-cli",level:2},{value:"Parameter Files (YAML)",id:"parameter-files-yaml",level:2},{value:"Dynamic Parameter Updates",id:"dynamic-parameter-updates",level:2},{value:"What are Launch Files?",id:"what-are-launch-files",level:2},{value:"Basic Launch File Example",id:"basic-launch-file-example",level:2},{value:"Launch File with Parameters",id:"launch-file-with-parameters",level:2},{value:"Multi-Node Launch File Example",id:"multi-node-launch-file-example",level:2},{value:"Launch File with Conditionals",id:"launch-file-with-conditionals",level:2},{value:"Including Other Launch Files",id:"including-other-launch-files",level:2},{value:"Launch File Introspection",id:"launch-file-introspection",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"Parameters",id:"parameters",level:3},{value:"Launch Files",id:"launch-files",level:3},{value:"Common Pitfalls and Solutions",id:"common-pitfalls-and-solutions",level:2},{value:"1. &quot;Parameter not declared&quot;",id:"1-parameter-not-declared",level:3},{value:"2. &quot;Launch file not found&quot;",id:"2-launch-file-not-found",level:3},{value:"3. &quot;Parameter file not loaded&quot;",id:"3-parameter-file-not-loaded",level:3},{value:"4. &quot;Nodes start in wrong order&quot;",id:"4-nodes-start-in-wrong-order",level:3},{value:"Practical Example: Multi-Robot System",id:"practical-example-multi-robot-system",level:2},{value:"Key Takeaways",id:"key-takeaways",level:2},{value:"Exercises",id:"exercises",level:2},{value:"Next Section",id:"next-section",level:2},{value:"Further Reading",id:"further-reading",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"section-3-parameters--launch-files",children:"Section 3: Parameters & Launch Files"})}),"\n",(0,s.jsx)(n.h2,{id:"introduction",children:"Introduction"}),"\n",(0,s.jsx)(n.p,{children:"So far we've built individual nodes that communicate via topics, services, and actions. Real robotics applications require:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Runtime configuration"}),": Adjust robot speed, sensor thresholds, algorithm parameters without recompiling"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Multi-node orchestration"}),": Launch 10+ nodes simultaneously with correct dependencies and namespaces"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Environment management"}),": Different configs for simulation vs hardware, development vs production"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"ROS 2 provides two mechanisms for this:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Parameters"}),": Runtime configuration values (robot speed, sensor topic names, PID gains)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Launch files"}),": Python scripts that start multiple nodes with coordinated configuration"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"what-are-parameters",children:"What are Parameters?"}),"\n",(0,s.jsxs)(n.p,{children:["A ",(0,s.jsx)(n.strong,{children:"parameter"})," is a named value associated with a node that can be:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Declared"})," in node code with default values"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Set"})," from command line, launch files, or parameter files"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Changed"})," at runtime without restarting the node"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Analogy"}),": Parameters are like configuration settings in an app:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"# Traditional config file\nconfig = {\n    'max_speed': 1.0,\n    'sensor_topic': '/camera/image',\n    'enable_debug': False\n}\n\n# ROS 2 parameters (similar concept, but dynamic)\nself.declare_parameter('max_speed', 1.0)\nself.declare_parameter('sensor_topic', '/camera/image')\nself.declare_parameter('enable_debug', False)\n"})}),"\n",(0,s.jsx)(n.h3,{id:"parameter-types",children:"Parameter Types"}),"\n",(0,s.jsx)(n.p,{children:"ROS 2 supports these parameter types:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"bool"})," - True/False flags"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"int"})," - Integer values"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"double"})," - Floating-point numbers"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"string"})," - Text values"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"byte_array"})," - Binary data"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"bool_array"}),", ",(0,s.jsx)(n.code,{children:"int_array"}),", ",(0,s.jsx)(n.code,{children:"double_array"}),", ",(0,s.jsx)(n.code,{children:"string_array"})," - Arrays of values"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"node-with-parameters-example",children:"Node with Parameters Example"}),"\n",(0,s.jsx)(n.p,{children:"Let's create a configurable velocity publisher:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"# File: configurable_velocity.py\nimport rclpy\nfrom rclpy.node import Node\nfrom geometry_msgs.msg import Twist\n\n\nclass ConfigurableVelocity(Node):\n    def __init__(self):\n        super().__init__('configurable_velocity')\n\n        # Declare parameters with default values\n        self.declare_parameter('linear_speed', 0.5)  # m/s\n        self.declare_parameter('angular_speed', 0.3)  # rad/s\n        self.declare_parameter('publish_rate', 10.0)  # Hz\n        self.declare_parameter('topic_name', '/cmd_vel')\n        self.declare_parameter('enable_rotation', True)\n\n        # Get parameter values\n        linear = self.get_parameter('linear_speed').value\n        angular = self.get_parameter('angular_speed').value\n        rate = self.get_parameter('publish_rate').value\n        topic = self.get_parameter('topic_name').value\n        enable_rot = self.get_parameter('enable_rotation').value\n\n        # Create publisher with configured topic\n        self.publisher = self.create_publisher(Twist, topic, 10)\n\n        # Create timer with configured rate\n        timer_period = 1.0 / rate\n        self.timer = self.create_timer(timer_period, self.timer_callback)\n\n        # Store configuration\n        self.linear_speed = linear\n        self.angular_speed = angular if enable_rot else 0.0\n\n        self.get_logger().info(f'Started with: linear={linear}, angular={angular}, rate={rate}')\n\n    def timer_callback(self):\n        msg = Twist()\n        msg.linear.x = self.linear_speed\n        msg.angular.z = self.angular_speed\n        self.publisher.publish(msg)\n\n\ndef main(args=None):\n    rclpy.init(args=args)\n    node = ConfigurableVelocity()\n\n    try:\n        rclpy.spin(node)\n    except KeyboardInterrupt:\n        pass\n    finally:\n        node.destroy_node()\n        rclpy.shutdown()\n\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Key concepts"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"declare_parameter(name, default_value)"})," - Register parameter with fallback"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"get_parameter(name).value"})," - Retrieve current value"]}),"\n",(0,s.jsxs)(n.li,{children:["Parameters are read during ",(0,s.jsx)(n.code,{children:"__init__()"}),", so changes require node restart (for this example)"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Running with custom parameters"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Use defaults\npython3 configurable_velocity.py\n\n# Override parameters from command line\nros2 run my_package configurable_velocity --ros-args \\\n  -p linear_speed:=1.0 \\\n  -p angular_speed:=0.5 \\\n  -p publish_rate:=20.0 \\\n  -p enable_rotation:=false\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"parameter-introspection-with-cli",children:"Parameter Introspection with CLI"}),"\n",(0,s.jsx)(n.p,{children:"While node is running, use these commands:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# List all nodes\nros2 node list\n\n# List parameters for a node\nros2 param list /configurable_velocity\n# Output:\n# enable_rotation\n# angular_speed\n# linear_speed\n# publish_rate\n# topic_name\n\n# Get parameter value\nros2 param get /configurable_velocity linear_speed\n# Output: Double value is: 0.5\n\n# Set parameter at runtime (if node supports dynamic updates)\nros2 param set /configurable_velocity linear_speed 1.0\n# Output: Set parameter successful\n\n# Dump all parameters to file\nros2 param dump /configurable_velocity > my_params.yaml\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"parameter-files-yaml",children:"Parameter Files (YAML)"}),"\n",(0,s.jsxs)(n.p,{children:["Instead of passing parameters on command line, use ",(0,s.jsx)(n.strong,{children:"YAML files"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"# File: robot_config.yaml\nconfigurable_velocity:\n  ros__parameters:\n    linear_speed: 0.8\n    angular_speed: 0.4\n    publish_rate: 15.0\n    topic_name: '/mobile_base/cmd_vel'\n    enable_rotation: true\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Load parameters from file"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"ros2 run my_package configurable_velocity --ros-args \\\n  --params-file robot_config.yaml\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"YAML structure"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Top level: Node name (",(0,s.jsx)(n.code,{children:"configurable_velocity"}),")"]}),"\n",(0,s.jsxs)(n.li,{children:["Second level: ",(0,s.jsx)(n.code,{children:"ros__parameters"})," (double underscore)"]}),"\n",(0,s.jsx)(n.li,{children:"Third level: Parameter names and values"}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"dynamic-parameter-updates",children:"Dynamic Parameter Updates"}),"\n",(0,s.jsxs)(n.p,{children:["To allow runtime parameter changes without restarting, add a ",(0,s.jsx)(n.strong,{children:"parameter callback"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"from rcl_interfaces.msg import ParameterDescriptor, SetParametersResult\n\n\nclass DynamicConfigNode(Node):\n    def __init__(self):\n        super().__init__('dynamic_config_node')\n\n        # Declare parameter with descriptor (optional constraints)\n        speed_descriptor = ParameterDescriptor(\n            description='Maximum linear speed in m/s',\n            floating_point_range=[\n                {'from_value': 0.0, 'to_value': 2.0, 'step': 0.1}\n            ]\n        )\n        self.declare_parameter('max_speed', 0.5, speed_descriptor)\n\n        # Register callback for parameter changes\n        self.add_on_set_parameters_callback(self.parameters_callback)\n\n        self.max_speed = self.get_parameter('max_speed').value\n        self.get_logger().info(f'Initial max_speed: {self.max_speed}')\n\n    def parameters_callback(self, params):\n        \"\"\"Called when parameters are set at runtime.\"\"\"\n        for param in params:\n            if param.name == 'max_speed':\n                # Validate value\n                if 0.0 <= param.value <= 2.0:\n                    self.max_speed = param.value\n                    self.get_logger().info(f'Updated max_speed to {param.value}')\n                    return SetParametersResult(successful=True)\n                else:\n                    self.get_logger().error(f'Invalid speed: {param.value}')\n                    return SetParametersResult(successful=False)\n\n        return SetParametersResult(successful=True)\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Benefits"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Change parameters without restarting node"}),"\n",(0,s.jsx)(n.li,{children:"Validate new values before applying"}),"\n",(0,s.jsx)(n.li,{children:"Log configuration changes"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Testing dynamic updates"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'# Terminal 1: Run node\npython3 dynamic_config_node.py\n\n# Terminal 2: Change parameter\nros2 param set /dynamic_config_node max_speed 1.2\n# Node logs: "Updated max_speed to 1.2"\n\n# Try invalid value\nros2 param set /dynamic_config_node max_speed 3.0\n# Node logs: "Invalid speed: 3.0"\n# Output: Setting parameter failed\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"what-are-launch-files",children:"What are Launch Files?"}),"\n",(0,s.jsxs)(n.p,{children:["A ",(0,s.jsx)(n.strong,{children:"launch file"})," is a Python script that:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Starts multiple nodes simultaneously"}),"\n",(0,s.jsx)(n.li,{children:"Sets parameters for each node"}),"\n",(0,s.jsx)(n.li,{children:"Configures remappings (redirect topic names)"}),"\n",(0,s.jsx)(n.li,{children:"Manages node lifecycle (start order, restart on crash)"}),"\n",(0,s.jsx)(n.li,{children:"Loads parameter files"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Why launch files?"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Manually starting 15 nodes is error-prone"}),"\n",(0,s.jsx)(n.li,{children:"Ensures correct startup order (e.g., sensor driver before SLAM)"}),"\n",(0,s.jsx)(n.li,{children:"Consistent configuration across team members"}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"basic-launch-file-example",children:"Basic Launch File Example"}),"\n",(0,s.jsx)(n.p,{children:"Let's create a launch file that starts a publisher and subscriber together:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"# File: simple_demo.launch.py\nfrom launch import LaunchDescription\nfrom launch_ros.actions import Node\n\n\ndef generate_launch_description():\n    return LaunchDescription([\n        # Launch publisher node\n        Node(\n            package='demo_nodes_cpp',\n            executable='talker',\n            name='my_publisher',\n            output='screen'  # Print logs to terminal\n        ),\n\n        # Launch subscriber node\n        Node(\n            package='demo_nodes_py',\n            executable='listener',\n            name='my_subscriber',\n            output='screen'\n        ),\n    ])\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Running the launch file"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"ros2 launch my_package simple_demo.launch.py\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Output"}),": Both nodes start, talker publishes, listener receives messages"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"launch-file-with-parameters",children:"Launch File with Parameters"}),"\n",(0,s.jsx)(n.p,{children:"Let's launch our configurable velocity node with custom parameters:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"# File: velocity_launch.launch.py\nfrom launch import LaunchDescription\nfrom launch_ros.actions import Node\n\n\ndef generate_launch_description():\n    return LaunchDescription([\n        Node(\n            package='my_package',\n            executable='configurable_velocity',\n            name='robot_velocity_controller',\n            output='screen',\n            parameters=[{\n                'linear_speed': 1.0,\n                'angular_speed': 0.5,\n                'publish_rate': 20.0,\n                'topic_name': '/robot/cmd_vel',\n                'enable_rotation': True\n            }]\n        ),\n    ])\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Or load from YAML file"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"import os\nfrom ament_index_python.packages import get_package_share_directory\nfrom launch import LaunchDescription\nfrom launch_ros.actions import Node\n\n\ndef generate_launch_description():\n    # Get path to parameter file\n    config_dir = get_package_share_directory('my_package')\n    params_file = os.path.join(config_dir, 'config', 'robot_config.yaml')\n\n    return LaunchDescription([\n        Node(\n            package='my_package',\n            executable='configurable_velocity',\n            name='robot_velocity_controller',\n            output='screen',\n            parameters=[params_file]  # Load from YAML\n        ),\n    ])\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"multi-node-launch-file-example",children:"Multi-Node Launch File Example"}),"\n",(0,s.jsx)(n.p,{children:"Let's launch a complete robot system with multiple nodes:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"# File: robot_system.launch.py\nfrom launch import LaunchDescription\nfrom launch_ros.actions import Node\nfrom launch.actions import DeclareLaunchArgument, LogInfo\nfrom launch.substitutions import LaunchConfiguration\n\n\ndef generate_launch_description():\n    # Declare launch arguments (command-line overrides)\n    use_sim_time_arg = DeclareLaunchArgument(\n        'use_sim_time',\n        default_value='false',\n        description='Use simulation time if true'\n    )\n\n    robot_name_arg = DeclareLaunchArgument(\n        'robot_name',\n        default_value='robot1',\n        description='Robot namespace'\n    )\n\n    # Get launch argument values\n    use_sim_time = LaunchConfiguration('use_sim_time')\n    robot_name = LaunchConfiguration('robot_name')\n\n    return LaunchDescription([\n        # Declare arguments\n        use_sim_time_arg,\n        robot_name_arg,\n\n        # Log launch info\n        LogInfo(msg=['Launching robot system for: ', robot_name]),\n\n        # 1. Sensor driver node\n        Node(\n            package='sensor_driver',\n            executable='lidar_node',\n            name='lidar_driver',\n            namespace=robot_name,\n            parameters=[{\n                'use_sim_time': use_sim_time,\n                'scan_topic': '/scan',\n                'frame_id': 'lidar_link'\n            }],\n            output='screen'\n        ),\n\n        # 2. Localization node\n        Node(\n            package='localization',\n            executable='amcl',\n            name='localizer',\n            namespace=robot_name,\n            parameters=[{\n                'use_sim_time': use_sim_time,\n                'odom_topic': '/odom',\n                'scan_topic': '/scan'\n            }],\n            output='screen'\n        ),\n\n        # 3. Navigation planner\n        Node(\n            package='navigation',\n            executable='path_planner',\n            name='planner',\n            namespace=robot_name,\n            parameters=[{\n                'use_sim_time': use_sim_time,\n                'max_speed': 1.0,\n                'safety_distance': 0.3\n            }],\n            output='screen'\n        ),\n\n        # 4. Velocity controller\n        Node(\n            package='control',\n            executable='velocity_controller',\n            name='controller',\n            namespace=robot_name,\n            parameters=[{\n                'use_sim_time': use_sim_time,\n                'cmd_vel_topic': '/cmd_vel'\n            }],\n            remappings=[\n                ('/cmd_vel', '/mobile_base/cmd_vel')  # Remap topic\n            ],\n            output='screen'\n        ),\n    ])\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Running with custom arguments"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Use defaults\nros2 launch my_package robot_system.launch.py\n\n# Override arguments\nros2 launch my_package robot_system.launch.py \\\n  use_sim_time:=true \\\n  robot_name:=robot2\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Key features"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"DeclareLaunchArgument"}),": Command-line parameters for launch file"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"namespace"}),": Prefix all node names and topics (multi-robot support)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"remappings"}),": Redirect topic names (e.g., ",(0,s.jsx)(n.code,{children:"/cmd_vel"})," \u2192 ",(0,s.jsx)(n.code,{children:"/mobile_base/cmd_vel"}),")"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"output='screen'"}),": Show node logs in terminal"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"launch-file-with-conditionals",children:"Launch File with Conditionals"}),"\n",(0,s.jsx)(n.p,{children:"Start nodes conditionally based on arguments:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"from launch import LaunchDescription\nfrom launch_ros.actions import Node\nfrom launch.actions import DeclareLaunchArgument\nfrom launch.substitutions import LaunchConfiguration\nfrom launch.conditions import IfCondition\n\n\ndef generate_launch_description():\n    use_rviz_arg = DeclareLaunchArgument(\n        'use_rviz',\n        default_value='true',\n        description='Launch RViz for visualization'\n    )\n\n    use_rviz = LaunchConfiguration('use_rviz')\n\n    return LaunchDescription([\n        use_rviz_arg,\n\n        # Always launch robot nodes\n        Node(\n            package='my_package',\n            executable='robot_controller',\n            name='controller',\n            output='screen'\n        ),\n\n        # Conditionally launch RViz\n        Node(\n            package='rviz2',\n            executable='rviz2',\n            name='rviz',\n            condition=IfCondition(use_rviz),  # Only if use_rviz=true\n            output='screen'\n        ),\n    ])\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Usage"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Launch with RViz\nros2 launch my_package robot.launch.py use_rviz:=true\n\n# Launch without RViz\nros2 launch my_package robot.launch.py use_rviz:=false\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"including-other-launch-files",children:"Including Other Launch Files"}),"\n",(0,s.jsx)(n.p,{children:"Modular launch files can include others:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"# File: simulation.launch.py\nfrom launch import LaunchDescription\nfrom launch.actions import IncludeLaunchDescription\nfrom launch.launch_description_sources import PythonLaunchDescriptionSource\nfrom ament_index_python.packages import get_package_share_directory\nimport os\n\n\ndef generate_launch_description():\n    # Get paths to other launch files\n    gazebo_pkg = get_package_share_directory('gazebo_ros')\n    robot_pkg = get_package_share_directory('my_robot_description')\n\n    gazebo_launch = os.path.join(gazebo_pkg, 'launch', 'gazebo.launch.py')\n    robot_launch = os.path.join(robot_pkg, 'launch', 'robot_state_publisher.launch.py')\n\n    return LaunchDescription([\n        # Include Gazebo simulator launch file\n        IncludeLaunchDescription(\n            PythonLaunchDescriptionSource(gazebo_launch),\n            launch_arguments={'world': 'empty_world'}.items()\n        ),\n\n        # Include robot description launch file\n        IncludeLaunchDescription(\n            PythonLaunchDescriptionSource(robot_launch),\n            launch_arguments={'use_sim_time': 'true'}.items()\n        ),\n    ])\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Benefits"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Reuse existing launch files"}),"\n",(0,s.jsx)(n.li,{children:"Compose complex systems from smaller modules"}),"\n",(0,s.jsx)(n.li,{children:"Override included launch file arguments"}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"launch-file-introspection",children:"Launch File Introspection"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# List all launch files in a package\nros2 launch my_package <TAB>\n\n# See launch file arguments\nros2 launch my_package robot_system.launch.py --show-args\n# Output:\n# Arguments (pass arguments as '<name>:=<value>'):\n#   'use_sim_time':\n#       Use simulation time if true\n#       (default: 'false')\n#   'robot_name':\n#       Robot namespace\n#       (default: 'robot1')\n\n# See what nodes would be launched (dry run)\nros2 launch my_package robot_system.launch.py --show-nodes\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,s.jsx)(n.h3,{id:"parameters",children:"Parameters"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Always declare parameters"})," with defaults in ",(0,s.jsx)(n.code,{children:"__init__()"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Use descriptive names"}),": ",(0,s.jsx)(n.code,{children:"max_linear_velocity"})," not ",(0,s.jsx)(n.code,{children:"max_vel"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Add ParameterDescriptor"})," with value ranges and descriptions"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Validate in callback"})," before applying dynamic updates"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Log parameter changes"})," for debugging"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"launch-files",children:"Launch Files"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Use DeclareLaunchArgument"})," for flexibility (sim vs real, robot names)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Organize by system"}),": ",(0,s.jsx)(n.code,{children:"sensors.launch.py"}),", ",(0,s.jsx)(n.code,{children:"navigation.launch.py"}),", ",(0,s.jsx)(n.code,{children:"main.launch.py"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Use namespaces"})," for multi-robot systems"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Load parameters from YAML"})," files, not hardcoded in launch file"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Document required arguments"})," with descriptions"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"common-pitfalls-and-solutions",children:"Common Pitfalls and Solutions"}),"\n",(0,s.jsx)(n.h3,{id:"1-parameter-not-declared",children:'1. "Parameter not declared"'}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Symptom"}),": ",(0,s.jsx)(n.code,{children:"ParameterNotDeclaredException"})," when calling ",(0,s.jsx)(n.code,{children:"get_parameter()"})]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Cause"}),": Forgot to call ",(0,s.jsx)(n.code,{children:"declare_parameter()"})," first"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Solution"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"# Wrong: get before declare\nself.speed = self.get_parameter('speed').value  # ERROR\n\n# Correct: declare then get\nself.declare_parameter('speed', 1.0)\nself.speed = self.get_parameter('speed').value\n"})}),"\n",(0,s.jsx)(n.h3,{id:"2-launch-file-not-found",children:'2. "Launch file not found"'}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Symptom"}),": ",(0,s.jsx)(n.code,{children:"launch file '...' not found"})]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Cause"}),": Launch file not in correct directory or not installed"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Solution"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"# Correct directory structure:\nmy_package/\n  launch/\n    my_launch.launch.py  # Must end with .launch.py\n\n# In setup.py:\nfrom glob import glob\ndata_files=[\n    ('share/my_package/launch', glob('launch/*.launch.py')),\n]\n"})}),"\n",(0,s.jsx)(n.h3,{id:"3-parameter-file-not-loaded",children:'3. "Parameter file not loaded"'}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Symptom"}),": Node uses default parameters, ignoring YAML file"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Cause"}),": Incorrect YAML structure or file path"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Solution"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"# Wrong: Missing ros__parameters\nmy_node:\n  speed: 1.0\n\n# Correct: Double underscore\nmy_node:\n  ros__parameters:\n    speed: 1.0\n"})}),"\n",(0,s.jsx)(n.h3,{id:"4-nodes-start-in-wrong-order",children:'4. "Nodes start in wrong order"'}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Symptom"}),": Subscriber starts before publisher, misses messages"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Solution"}),": Use event handlers to wait for nodes:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"from launch.actions import RegisterEventHandler\nfrom launch.event_handlers import OnProcessStart\n\n# Wait for sensor node to start before starting planner\nsensor_node = Node(...)\nplanner_node = Node(...)\n\nwait_for_sensor = RegisterEventHandler(\n    event_handler=OnProcessStart(\n        target_action=sensor_node,\n        on_start=[planner_node]\n    )\n)\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"practical-example-multi-robot-system",children:"Practical Example: Multi-Robot System"}),"\n",(0,s.jsx)(n.p,{children:"Let's launch 3 robots with unique namespaces and configurations:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"# File: multi_robot.launch.py\nfrom launch import LaunchDescription\nfrom launch_ros.actions import Node\n\n\ndef generate_launch_description():\n    nodes = []\n\n    # Launch 3 robots with different configurations\n    for i in range(1, 4):\n        robot_name = f'robot{i}'\n\n        # Each robot gets velocity controller\n        velocity_node = Node(\n            package='my_package',\n            executable='configurable_velocity',\n            name='velocity_controller',\n            namespace=robot_name,\n            parameters=[{\n                'linear_speed': 0.5 + (i * 0.2),  # robot1: 0.7, robot2: 0.9, robot3: 1.1\n                'angular_speed': 0.3,\n                'publish_rate': 10.0,\n                'topic_name': '/cmd_vel'\n            }],\n            output='screen'\n        )\n\n        # Each robot gets obstacle detector\n        detector_node = Node(\n            package='sensors',\n            executable='obstacle_detector',\n            name='obstacle_detector',\n            namespace=robot_name,\n            parameters=[{\n                'safety_distance': 0.5,\n                'sensor_topic': '/scan'\n            }],\n            output='screen'\n        )\n\n        nodes.extend([velocity_node, detector_node])\n\n    return LaunchDescription(nodes)\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Result"}),": Launches 6 nodes total (2 per robot) with unique topics:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"/robot1/cmd_vel"}),", ",(0,s.jsx)(n.code,{children:"/robot1/scan"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"/robot2/cmd_vel"}),", ",(0,s.jsx)(n.code,{children:"/robot2/scan"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"/robot3/cmd_vel"}),", ",(0,s.jsx)(n.code,{children:"/robot3/scan"})]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"key-takeaways",children:"Key Takeaways"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Parameters"})," enable runtime configuration without recompiling"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Parameter files (YAML)"})," separate configuration from code"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Dynamic parameters"})," allow updates without restarting nodes"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Launch files"})," orchestrate multi-node systems with coordinated configuration"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Namespaces"})," enable multi-robot systems on same network"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"DeclareLaunchArgument"})," makes launch files flexible and reusable"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"exercises",children:"Exercises"}),"\n",(0,s.jsx)(n.p,{children:"Try these hands-on challenges:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Parameterized node"}),": Modify ",(0,s.jsx)(n.code,{children:"simple_publisher.py"})," to accept parameters for message content and publish rate"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Test with ",(0,s.jsx)(n.code,{children:"ros2 param set"})," at runtime"]}),"\n",(0,s.jsxs)(n.li,{children:["Save parameters to YAML file with ",(0,s.jsx)(n.code,{children:"ros2 param dump"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Launch file"}),": Create a launch file that starts publisher and subscriber from Chapter 03.1"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Add parameters to configure topic name"}),"\n",(0,s.jsx)(n.li,{children:"Test with different topic names"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Multi-instance"}),": Create a launch file that starts 5 publishers with unique names and different rates"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Use loop to generate nodes dynamically"}),"\n",(0,s.jsxs)(n.li,{children:["Verify with ",(0,s.jsx)(n.code,{children:"ros2 node list"})," and ",(0,s.jsx)(n.code,{children:"ros2 topic hz"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Conditional launch"}),": Create a launch file with arguments to enable/disable specific nodes"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Add ",(0,s.jsx)(n.code,{children:"use_visualization"})," argument to launch RViz"]}),"\n",(0,s.jsxs)(n.li,{children:["Add ",(0,s.jsx)(n.code,{children:"robot_count"})," argument to launch N robots"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"next-section",children:"Next Section"}),"\n",(0,s.jsxs)(n.p,{children:["Ready to debug your ROS 2 applications? Continue to ",(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.a,{href:"./debugging-tools",children:"Section 4: Debugging Tools"})})," to learn troubleshooting techniques and visualization tools."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"further-reading",children:"Further Reading"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"ROS 2 Parameters"}),": ",(0,s.jsx)(n.a,{href:"https://docs.ros.org/en/jazzy/Tutorials/Beginner-CLI-Tools/Understanding-ROS2-Parameters.html",children:"https://docs.ros.org/en/jazzy/Tutorials/Beginner-CLI-Tools/Understanding-ROS2-Parameters.html"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"ROS 2 Launch"}),": ",(0,s.jsx)(n.a,{href:"https://docs.ros.org/en/jazzy/Tutorials/Intermediate/Launch/Launch-Main.html",children:"https://docs.ros.org/en/jazzy/Tutorials/Intermediate/Launch/Launch-Main.html"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Launch File Architecture"}),": ",(0,s.jsx)(n.a,{href:"https://design.ros2.org/articles/roslaunch.html",children:"https://design.ros2.org/articles/roslaunch.html"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Parameter YAML Files"}),": ",(0,s.jsx)(n.a,{href:"https://docs.ros.org/en/jazzy/Concepts/About-ROS-2-Parameters.html",children:"https://docs.ros.org/en/jazzy/Concepts/About-ROS-2-Parameters.html"})]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>l,x:()=>t});var a=r(6540);const s={},i=a.createContext(s);function l(e){const n=a.useContext(i);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),a.createElement(i.Provider,{value:n},e.children)}}}]);